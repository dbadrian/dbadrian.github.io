/*!*
 * Javascript BibTex Parser v0.1
 * Copyright (c) 2008 Simon Fraser University
 * @author Steve Hannah <shannah at sfu dot ca>
 * 
 *
 * License:
 * 
 *     This program is free software: you can redistribute it and/or modify
 *     it under the terms of the GNU General Public License as published by
 *     the Free Software Foundation, either version 3 of the License, or
 *     (at your option) any later version.
 * 
 *     This program is distributed in the hope that it will be useful,
 *     but WITHOUT ANY WARRANTY; without even the implied warranty of
 *     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *     GNU General Public License for more details.
 * 
 *     You should have received a copy of the GNU General Public License
 *     along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 *
 * Credits:
 *
 * This library is a port of the PEAR Structures_BibTex parser written
 * in PHP (http://pear.php.net/package/Structures_BibTex).
 *
 * In order to make porting the parser into javascript easier, I have made
 * use of many phpjs functions, which are distributed here under the MIT License:
 *
 * 
 * More info at: http://kevin.vanzonneveld.net/techblog/category/php2js
 * 
 * php.js is copyright 2008 Kevin van Zonneveld.
 * 
 * Portions copyright Ates Goral (http://magnetiq.com), Legaev Andrey,
 * _argos, Jonas Raoni Soares Silva (http://www.jsfromhell.com),
 * Webtoolkit.info (http://www.webtoolkit.info/), Carlos R. L. Rodrigues, Ash
 * Searle (http://hexmen.com/blog/), Tyler Akins (http://rumkin.com), mdsjack
 * (http://www.mdsjack.bo.it), Alexander Ermolaev
 * (http://snippets.dzone.com/user/AlexanderErmolaev), Andrea Giammarchi
 * (http://webreflection.blogspot.com), Bayron Guevara, Cord, David, Karol
 * Kowalski, Leslie Hoare, Lincoln Ramsay, Mick@el, Nick Callen, Peter-Paul
 * Koch (http://www.quirksmode.org/js/beat.html), Philippe Baumann, Steve
 * Clay, booeyOH
 * 
 * Licensed under the MIT (MIT-LICENSE.txt) license.
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included
 * in all copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
 * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.
 * IN NO EVENT SHALL KEVIN VAN ZONNEVELD BE LIABLE FOR ANY CLAIM, DAMAGES 
 * OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE,
 * ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR 
 * OTHER DEALINGS IN THE SOFTWARE.
 *
 *
 * Synopsis:
 * ----------
 *
 * This class provides the following functionality:
 *    1. Parse BibTex into a logical data javascript data structure.
 *    2. Output parsed BibTex entries as HTML, RTF, or BibTex.
 *
 *  
 * The following usage instructions have been copyed and adapted from the PHP instructions located
 * at http://pear.php.net/manual/en/package.structures.structures-bibtex.intro.php
 * Introduction
 * --------------
 * Overview
 * ----------
 * This package provides methods to access information stored in a BibTex
 * file. During parsing it is possible to let the data be validated. In
 * addition. the creation of BibTex Strings as well as RTF Strings is also
 * supported. A few examples
 * 
 * Example 1. Loading a BibTex File and printing the parsed array
 * <script src="BibTex.js"></script>
 * <script>
 * bibtex = new BibTex();
 * bibtex.content = content; // the bibtex content as a string
 * 
 * bibtex->parse();
 * alert(print_r($bibtex->data,true));
 * </script>
 * 
 * 
 * Options
 * --------
 * Options can be set either in the constructor or with the method
 * setOption(). When setting in the constructor the options are given in an
 * associative array. The options are:
 * 
 * 	-	stripDelimiter (default: true) Stripping the delimiter surrounding the entries. 
 * 	-	validate (default: true) Validation while parsing. 
 * 	-	unwrap (default: false) Unwrapping entries while parsing. 
 * 	-	wordWrapWidth (default: false) If set to a number higher one
 * 	    that the entries are wrapped after that amount of characters. 
 * 	-	wordWrapBreak (default: \n) String used to break the line (attached to the line). 
 * 	-	wordWrapCut (default: 0) If set to zero the line will we
 * 	    wrapped at the next possible space, if set to one the line will be
 * 	    wrapped exactly after the given amount of characters. 
 * 	-	removeCurlyBraces (default: false) If set to true Curly Braces will be removed. 
 * 
 * Example of setting options in the constructor:
 * 
 * Example 2. Setting options in the constructor
 * bibtex = new BibTex({'validate':false, 'unwrap':true});
 * 
 * 
 * Example of setting options using the method setOption():
 * 
 * Example 62-3. Setting options using setOption
 * bibtex = new BibTex();
 * bibtex.setOption('validate', false);
 * bibtex.setOption('unwrap', true);
 * 
 * Stored Data
 * ------------
 * The data is stored in the class variable data. This is a a list where
 * each entry is a hash table representing one bibtex-entry. The keys of
 * the hash table correspond to the keys used in bibtex and the values are
 * the corresponding values. Some of these keys are:
 * 
 * 	-	cite - The key used in a LaTeX source to do the citing. 
 * 	-	entryType - The type of the entry, like techreport, book and so on. 
 * 	-	author - One or more authors of the entry. This entry is also a
 * 	    list with hash tables representing the authors as entries. The
 * 	    author has table is explained later. 
 * 	-	title - Title of the entry. 
 * 
 * Author
 * ------
 * As described before the authors are stored in a list. Every entry
 * representing one author as a has table. The hash table consits of four
 * keys: first, von, last and jr. The keys are explained in the following
 * list:
 * 
 * 	-	first - The first name of the author. 
 * 	-	von - Some names have a 'von' part in their name. This is usually a sign of nobleness. 
 * 	-	last - The last name of the author. 
 * 	-	jr - Sometimes a author is the son of his father and has the
 * 	    same name, then the value would be jr. The same is true for the
 * 	    value sen but vice versa. 
 * 
 * Adding an entry
 * ----------------
 * To add an entry simply create a hash table with the needed keys and
 * values and call the method addEntry().
 * Example 4. Adding an entry
 * bibtex                         = new BibTex();
 * var addarray                   = {};
 * addarray['entryType']          = 'Article';
 * addarray['cite']               = 'art2';
 * addarray['title']              = 'Titel of the Article';
 * addarray['author'] = [];
 * addarray['author'][0]['first'] = 'John';
 * addarray['author'][0]['last']  = 'Doe';
 * addarray['author'][1]['first'] = 'Jane';
 * addarray['author'][1]['last']  = 'Doe';
 * bibtex.addEntry(addarray);
 */function array(){return Array.prototype.slice.call(arguments)}function array_key_exists(e,t){return!(!t||t.constructor!==Array&&t.constructor!==Object)&&e in t}function array_keys(e,t,n){var o=new Array,n=!!n,s=!0,i=0;for(key in e)s=!0,t!=null&&(n&&e[key]!==t?s=!1:e[key]!=t&&(s=!1)),s&&(o[i]=key,i++);return o}function array_values(e){var t=[],n="";if(e&&typeof e=="object"&&e.change_key_case)return e.values();for(n in e)t[t.length]=e[n];return t}function in_array(e,t,n){var s,o=!1,n=!!n;for(s in t)if(n&&t[s]===e||!n&&t[s]==e){o=!0;break}return o}function sizeof(e,t){return count(e,t)}function count(e,t){var n,s=0;t=="COUNT_RECURSIVE"&&(t=1),t!=1&&(t=0);for(n in e)s++,t==1&&e[n]&&(e[n].constructor===Array||e[n].constructor===Object)&&(s+=count(e[n],1));return s}function explode(e,t,n){var s,o,i,a={0:""};return arguments.length<2||typeof arguments[0]=="undefined"||typeof arguments[1]=="undefined"?null:!(e===""||e===!1||e===null)&&(typeof e=="function"||typeof e=="object"||typeof t=="function"||typeof t=="object"?a:(e===!0&&(e="1"),n?(s=t.toString().split(e.toString()),o=s.splice(0,n-1),i=s.join(e.toString()),o.push(i),o):t.toString().split(e.toString())))}function implode(e,t){return t instanceof Array?t.join(e):t}function join(e,t){return implode(e,t)}function split(e,t){return explode(e,t)}function str_replace(e,t,n){for(var i=e,o=t,s=n,r=is_array(o),c=is_array(s),i=[].concat(i),o=[].concat(o),a=(s=[].concat(s)).length;j=0,a--;)for(;s[a]=s[a].split(i[j]).join(r?o[j]||"":o[0]),++j in i;);return c?s:s[0]}function strlen(e){return(""+e).length}function strpos(e,t,n){var s=e.indexOf(t,n);return s>=0&&s}function strrpos(e,t,n){var s=e.lastIndexOf(t,n);return s>=0&&s}function strtolower(e){return e.toLowerCase()}function strtoupper(e){return e.toUpperCase()}function substr(e,t,n){return t<0&&(t+=e.length),n==null?n=e.length:n<0?n+=e.length:n+=t,n<t&&(n=t),e.substring(t,n)}function trim(e,t){if(!e)return"";t?s=t.replace(/([[\]().?/*{}+$^:])/g,"$1"):s=` 

	\xa0           ​  　`;for(var s,n=0;n<e.length;n++)if(s.indexOf(e.charAt(n))===-1){e=e.substring(n);break}for(n=e.length-1;n>=0;n--)if(s.indexOf(e.charAt(n))===-1){e=e.substring(0,n+1);break}return s.indexOf(e.charAt(0))===-1?e:""}function wordwrap(e,t,n,s){var o,i,r,c,d,a=t,u=n,l=s;if(a<1)return e;for(r=-1,d=(c=e.split(`
`)).length;++r<d;c[r]+=i)for(i=c[r],c[r]="";i.length>a;c[r]+=i.slice(0,o)+((i=i.slice(o)).length?u:""))o=l==2||(o=i.slice(0,a+1).match(/\S*(\s)?$/))[1]?a:o.input.length-o[0].length||l==1&&a||o.input.length+(o=i.slice(a).match(/^\S*/)).input.length;return c.join(`
`)}function is_string(e){return typeof e=="string"}function ord(e){return e.charCodeAt(0)}function array_unique(e){var t,s,o,n=e;for(s=n.length;s;)for(t=--s;t>0;)if(n[s]===n[--t]){for(o=t;--t&&n[s]===n[t];);s-=n.splice(t+1,o-t).length}return n}function print_r(e,t){var n="",i=" ",a=4,s=function(e,t,n,i){t>0&&t++;var r,c=o(n*t,i),l=o(n*(t+1),i),a="";if(e instanceof Array||e instanceof Object){a+=`Array
`+c+`(
`;for(r in e)e[r]instanceof Array||e[r]instanceof Object?a+=l+"["+r+"] => "+s(e[r],t+1,n,i):a+=l+"["+r+"] => "+e[r]+`
`;a+=c+`)
`}else a=e.toString();return a},o=function(e,t){for(var n="",s=0;s<e;s++)n+=t;return n},n=s(e,0,a,i);return t!==!0?(document.write("<pre>"+n+"</pre>"),!0):n}function is_array(e){return e instanceof Array}function BibTex(e){typeof e=="undefined"&&(e={}),this.data,this.content,this._delimiters,this.warnings,this._options,this.rtfstring,this.htmlstring,this.allowedEntryTypes,this.authorstring,this._delimiters={'"':'"',"{":"}"},this.data=[],this.content="",this.warnings=[],this._options={stripDelimiter:!0,validate:!0,unwrap:!1,wordWrapWidth:!1,wordWrapBreak:`
`,wordWrapCut:0,removeCurlyBraces:!1,extractAuthors:!0};for(option in e)test=this.setOption(option,e[option]),this.isError(test);this.rtfstring='AUTHORS, "{ TITLE}", {i JOURNAL}, YEAR',this.htmlstring='AUTHORS, "<strong>TITLE</strong>", <em>JOURNAL</em>, YEAR<br />',this.allowedEntryTypes=array("article","book","booklet","confernce","inbook","incollection","inproceedings","manual","masterthesis","misc","phdthesis","proceedings","techreport","unpublished"),this.authorstring="VON LAST, JR, FIRST"}BibTex.prototype={setOption:function(e,t){return ret=!0,array_key_exists(e,this._options)?this._options[e]=t:ret=this.raiseError("Unknown option "+e),ret},parse:function(){this.warnings=[],this.data=[];for(var o,a=!0,t=0,i=!1,n="",r="",s="",e=0;e<strlen(this.content);e++)n=substr(this.content,e,1),0!=t&&"@"==n&&(this._checkAt(s)||(this._generateWarning("WARNING_MISSING_END_BRACE","",s),n="}",e--)),0==t&&"@"==n?i=!0:i&&"{"==n&&"\\"!=r?t++:i&&"}"==n&&"\\"!=r&&(t--,t<0&&(a=!1),0==t&&(i=!1,o=this._parseEntry(s),o&&(this.data[this.data.length]=o),s="")),i&&(s+=n),r=n;if(1==t&&(o=this._parseEntry(s),o?(this.data[this.data.length]=o,s="",t=0):a=!1),0!=t&&(a=!1),this._options.validate){cites=[];for(e=0;e<this.data.length;e++)cites[cites.length]=this.data[e].cite;if(unique=array_unique(cites),cites.length!=sizeof(unique)){notuniques=[];for(e=0;e<cites.length;e++)""==unique[e]&&(notuniques[notuniques.length]=cites[e]);this._generateWarning("WARNING_MULTIPLE_ENTRIES",implode(",",notuniques))}}return a?(this.content="",!0):this.raiseError("Unbalanced parenthesis")},_parseEntry:function(e){var t,n,s="";if(this._options.validate&&(s=e),t={},"@string"==strtolower(substr(e,0,7)))this._options.validate&&this._generateWarning("STRING_ENTRY_NOT_YET_SUPPORTED","",e+"}");else if("@preamble"==strtolower(substr(e,0,9)))this._options.validate&&this._generateWarning("PREAMBLE_ENTRY_NOT_YET_SUPPORTED","",e+"}");else{for(;strrpos(e,"=")!==!1;){for(position=strrpos(e,"="),proceed=!0,substr(e,position-1,1)=="\\"&&(proceed=!1),proceed&&(proceed=this._checkEqualSign(e,position));!proceed;)substring=substr(e,0,position),position=strrpos(substring,"="),proceed=!0,substr(e,position-1,1)=="\\"&&(proceed=!1),proceed&&(proceed=this._checkEqualSign(e,position));value=trim(substr(e,position+1)),e=substr(e,0,position),","==substr(value,strlen(value)-1,1)&&(value=substr(value,0,-1)),this._options.validate&&this._validateValue(value,s),this._options.stripDelimiter&&(value=this._stripDelimiter(value)),this._options.unwrap&&(value=this._unwrap(value)),this._options.removeCurlyBraces&&(value=this._removeCurlyBraces(value)),position=strrpos(e,","),field=strtolower(trim(substr(e,position+1))),t[field]=value,e=substr(e,0,position)}n=e.split("{"),t.cite=trim(n[1]),t.entryType=strtolower(trim(n[0])),"@"==t.entryType.substring(0,1)&&(t.entryType=substr(t.entryType,1)),this._options.validate&&(this._checkAllowedEntryType(t.entryType)||this._generateWarning("WARNING_NOT_ALLOWED_ENTRY_TYPE",t.entryType,e+"}")),in_array("author",array_keys(t))&&this._options.extractAuthors&&(t.author=this._extractAuthors(t.author)),in_array("editor",array_keys(t))&&this._options.extractAuthors&&(t.editor=this._extractAuthors(t.editor))}return t},_checkEqualSign:function(e,t){for(var s=!0,i=strlen(e),o=0,n=i-1;n>=t;n--)precedingchar=substr(e,n-1,1),charv=substr(e,n,1),"{"==charv&&"\\"!=precedingchar&&o++,"}"==charv&&"\\"!=precedingchar&&o--;if(0!=o&&(s=!1),s&&(entrycopy=trim(e),lastchar=substr(entrycopy,strlen(entrycopy)-1,1),","==lastchar&&(lastchar=substr(entrycopy,strlen(entrycopy)-2,1)),'"'==lastchar)){s=!1,found=0;for(n=i;n>=t;n--)if(precedingchar=substr(e,n-1,1),charv=substr(e,n,1),'"'==charv&&"\\"!=precedingchar&&found++,2==found){s=!0;break}}return s},_checkAllowedEntryType:function(e){return in_array(e,this.allowedEntryTypes)},_checkAt:function(e){var t,n=!1,s=array_keys(this._delimiters),o=array_values(this._delimiters);if(strrpos(e,"=")!==!1){for(position=strrpos(e,"="),proceed=!0,substr(e,position-1,1)=="\\"&&(proceed=!1);!proceed;)substring=substr(e,0,position),position=strrpos(substring,"="),proceed=!0,substr(e,position-1,1)=="\\"&&(proceed=!1);value=trim(substr(e,position+1)),open=0,charv="",lastchar="";for(t=0;t<strlen(value);t++)charv=substr(this.content,t,1),in_array(charv,s)&&"\\"!=lastchar?open++:in_array(charv,o)&&"\\"!=lastchar&&open--,lastchar=charv;open>0&&(n=!0)}return n},_stripDelimiter:function(e){for(var s=array_keys(this._delimiters),o=strlen(e),t=substr(e,0,1),n=substr(e,-1,1);in_array(t,s);){if(n==this._delimiters[t])e=substr(e,1,-1);else break;t=substr(e,0,1),n=substr(e,-1,1)}return e},_unwrap:function(e){return e=e.replace(/\s+/," "),trim(e)},_wordwrap:function(e){return""!=e&&is_string(e)&&(e=wordwrap(e,this._options.wordWrapWidth,this._options.wordWrapBreak,this._options.wordWrapCut)),e},_extractAuthors:function(e){e=this._unwrap(e);for(var t,n,s,o,i,a,r,l,u,m,h=e.split(" and "),d=0;d<h.length;d++){if(u=trim(h[d]),l="",r="",o="",m="",strpos(u,",")===!1)if(t=u.split(" |~"),i=t.length,1==i)o=t[0];else if(2==i)l=t[0],o=t[1];else{for(f=!1,c=!1,n=0;n<i-1;n++)if(c)o+=" "+t[n];else if(f)if(s=this._determineCase(t[n]),this.isError(s));else if(0==s||-1==s){islast=!0;for(a=n+1;a<i-1;a++)futurecase=this._determineCase(t[a]),this.isError(s)||0==futurecase&&(islast=!1);islast?(c=!0,-1==s?o+=" "+t[n]:r+=" "+t[n]):r+=" "+t[n]}else r+=" "+t[n];else s=this._determineCase(t[n]),this.isError(s)||(0==s?(f=!0,r+=" "+t[n]):l+=" "+t[n]);o+=" "+t[i-1]}else{if(t=[],t=explode(",",u),vonlastarray=[],vonlastarray=explode(" ",t[0]),i=sizeof(vonlastarray),1==i)o=vonlastarray[0];else{c=!1;for(n=0;n<i-1;n++)if(c)o+=" "+vonlastarray[n];else if(0!=this._determineCase(vonlastarray[n])){islast=!0;for(a=n+1;a<i-1;a++)this._determineCase(vonlastarray[a]),s=this._determineCase(vonlastarray[a]),this.isError(s)||0==s&&(islast=!1);islast?(c=!0,o+=" "+vonlastarray[n]):r+=" "+vonlastarray[n]}else r+=" "+vonlastarray[n];o+=" "+vonlastarray[i-1]}3==t.length&&(m=t[1]),l=t[t.length-1]}h[d]={first:trim(l),von:trim(r),last:trim(o),jr:trim(m)}}return h},_determineCase:function(e){var t,n,o,i,r,s=-1,a=trim(e);if(is_string(e)&&strlen(a)>0)for(o=0,i=!1,n=0;!i&&o<=strlen(e);)r=substr(a,o,1),t=ord(r),t==123&&n++,t==125&&n--,t>=65&&t<=90&&0==n?(s=1,i=!0):t>=97&&t<=122&&0==n?(s=0,i=!0):o++;else s=this.raiseError("Could not determine case on word: "+e);return s},isError:function(e){return typeof e=="Object"&&e.isError==1},_validateValue:function(e,t){e.match(/^{.*@.*}/)&&this._generateWarning("WARNING_AT_IN_BRACES",e,t),e.match(/^".*\\".*"/)&&this._generateWarning("WARNING_ESCAPED_DOUBLE_QUOTE_INSIDE_DOUBLE_QUOTES",e,t);for(var s=0,o="",n="",i=0;i<strlen(e);i++)n=substr(e,i,1),"{"==n&&"\\"!=o&&s++,"}"==n&&"\\"!=o&&s--,o=n;0!=s&&this._generateWarning("WARNING_UNBALANCED_AMOUNT_OF_BRACES",e,t)},_removeCurlyBraces:function(e){for(var i,r,a=array_keys(this._delimiters),t=substr(e,0,1),n=substr(e,-1,1),s="",o="";in_array(t,a);){if(n==this._delimiters[t])s+=t,o+=n,e=substr(e,1,-1);else break;t=substr(e,0,1),n=substr(e,-1,1)}return r="/([^\\\\]){(+*?[^\\\\])}/",i="12",e=e.replace(/([^\\\\])\{(.*?[^\\\\])\}/,i),e=s+e+o,e},_generateWarning:function(e,t,n){typeof n=="undefined"&&(n="");var s={};s.warning=e,s.entry=t,s.wholeentry=n,this.warnings[this.warnings.length]=s},clearWarnings:function(){this.warnings=array()},hasWarning:function(){return sizeof(this.warnings)>0},amount:function(){return sizeof(this.data)},_formatAuthor:function(e){return array_key_exists("von",e)?e.von=trim(e.von):e.von="",array_key_exists("last",e)?e.last=trim(e.last):e.last="",array_key_exists("jr",e)?e.jr=trim(e.jr):e.jr="",array_key_exists("first",e)?e.first=trim(e.first):e.first="",ret=this.authorstring,ret=str_replace("VON",e.von,ret),ret=str_replace("LAST",e.last,ret),ret=str_replace("JR",e.jr,ret),ret=str_replace("FIRST",e.first,ret),trim(ret)},bibTex:function(){for(var e,n,o,t="",s=0;s<this.data.length;s++){e=this.data[s],t+="@"+strtolower(e.entryType)+" { "+e.cite+`,
`;for(key in e)n=e[key],this._options.wordWrapWidth>0&&(n=this._wordWrap(n)),in_array(key,array("cite","entryType","author"))||(t+="	"+key+" = {"+n+`},
`);if(array_key_exists("author",e))if(this._options.extractAuthors){tmparray=[];for(j in e.author)o=e.author[j],tmparray[tmparray.length]=this._formatAuthor(o);author=join(" and ",tmparray)}else author=e.author;else author="";t+="	author = {"+author+`}
`,t+=`}

`}return t},addEntry:function(e){this.data[this.data.length]=e},getStatistic:function(){for(var t,e=array(),n=0;n<this.data.length;n++)t=this.data[n],array_key_exists(t.entryType,e)?e[t.entryType]++:e[t.entryType]=1;return e},rtf:function(){for(var e,s,o,t=`{\\rtf
`,n=0;n<this.data.length;n++){if(e=this.data[n],line=this.rtfstring,title="",journal="",year="",authors="",array_key_exists("title",e)&&(title=this._unwrap(e.title)),array_key_exists("journal",e)&&(journal=this._unwrap(e.journal)),array_key_exists("year",e)&&(year=this._unwrap(e.year)),array_key_exists("author",e))if(this._options.extractAuthors){tmparray=[];for(o in e.author)s=e.author[o],tmparray[tmparray.length]=this._formatAuthor(s);authors=join(", ",tmparray)}else authors=e.author;""!=title||""!=journal||""!=year||""!=authors?(line=str_replace("TITLE",title,line),line=str_replace("JOURNAL",journal,line),line=str_replace("YEAR",year,line),line=str_replace("AUTHORS",authors,line),line+=`
\\par
`,t+=line):this._generateWarning("WARNING_LINE_WAS_NOT_CONVERTED","",print_r(e,1))}return t+="}",t},html:function(e,t){typeof e=="undefined"&&(e=0),typeof t=="undefined"&&(t=this.data.length);for(var n,s,o,i,a,r,d,c=`<p>
`,l=e;l<t;l++){if(n=this.data[l],s=this.htmlstring,i="",a="",r="",o="",array_key_exists("title",n)&&(i=this._unwrap(n.title)),array_key_exists("journal",n)&&(a=this._unwrap(n.journal)),array_key_exists("year",n)&&(r=this._unwrap(n.year)),array_key_exists("author",n))if(this._options.extractAuthors){tmparray=[];for(j in n.author)d=n.author[j],tmparray[tmparray.length]=this._formatAuthor(d);o=join(", ",tmparray)}else o=n.author;""!=i||""!=a||""!=r||""!=o?(s=str_replace("TITLE",i,s),s=str_replace("JOURNAL",a,s),s=str_replace("YEAR",r,s),s=str_replace("AUTHORS",o,s),s+=`
`,c+=s):this._generateWarning("WARNING_LINE_WAS_NOT_CONVERTED","",print_r(n,1))}return c+=`</p>
`,c}};/*! DataTables 1.13.1
 * ©2008-2022 SpryMedia Ltd - datatables.net/license
 */!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(t){return e(t,window,document)}):"object"==typeof exports?module.exports=function(t,n){return t=t||window,n=n||("undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(n,t,t.document)}:window.DataTable=e(jQuery,window,document)}(function(e,t,n,s){"use strict";function dt(e){var t=parseInt(e,10);return!isNaN(t)&&isFinite(e)?t:null}function be(e,t,n){var s="string"==typeof e;return!!_(e)||(t&&s&&(e=kt(e,t)),n&&s&&(e=e.replace(Ae,"")),!isNaN(parseFloat(e))&&isFinite(e))}function Ft(e,t,n){var s;return!!_(e)||(_(s=e)||"string"==typeof s)&&!!be(e.replace(ie,""),t,n)||null}function U(e,t,n,o){var a=[],i=0,r=t.length;if(o!==s)for(;i<r;i++)e[t[i]][n]&&a.push(e[t[i]][n][o]);else for(;i<r;i++)a.push(e[t[i]][n]);return a}function T(e,t){var n,o,i=[];t===s?(t=0,o=e):(o=t,t=e);for(n=t;n<o;n++)i.push(n);return i}function Bt(e){for(var n=[],t=0,s=e.length;t<s;t++)e[t]&&n.push(e[t]);return n}function Pt(e,t){return-1!==this.indexOf(e,t=t===s?0:t)}var i,c,d,f,O,k,A,S,M,z,o=function(t,n){if(this instanceof o)return e(t).DataTable(n);n=t,this.$=function(e,t){return this.api(!0).$(e,t)},this._=function(e,t){return this.api(!0).rows(e,t).data()},this.api=function(e){return new a(e?de(this[d.iApiIndex]):this)},this.fnAddData=function(t,n){var o=this.api(!0),t=(Array.isArray(t)&&(Array.isArray(t[0])||e.isPlainObject(t[0]))?o.rows:o.row).add(t);return n!==s&&!n||o.draw(),t.flatten().toArray()},this.fnAdjustColumnSizing=function(e){var t=this.api(!0).columns.adjust(),n=t.settings()[0],o=n.oScroll;e===s||e?t.draw(!1):""===o.sX&&""===o.sY||se(n)},this.fnClearTable=function(e){var t=this.api(!0).clear();e!==s&&!e||t.draw()},this.fnClose=function(e){this.api(!0).row(e).child.hide()},this.fnDeleteRow=function(e,t,n){var o=this.api(!0),e=o.rows(e),i=e.settings()[0],a=i.aoData[e[0][0]];return e.remove(),t&&t.call(this,i,a),n!==s&&!n||o.draw(),a},this.fnDestroy=function(e){this.api(!0).destroy(e)},this.fnDraw=function(e){this.api(!0).draw(e)},this.fnFilter=function(e,t,n,o,i,a){var r=this.api(!0);(null===t||t===s?r:r.column(t)).search(e,n,o,a),r.draw()},this.fnGetData=function(e,t){var n,o=this.api(!0);return e!==s?(n=e.nodeName?e.nodeName.toLowerCase():"",t!==s||"td"==n||"th"==n?o.cell(e,t).data():o.row(e).data()||null):o.data().toArray()},this.fnGetNodes=function(e){var t=this.api(!0);return e!==s?t.row(e).node():t.rows().nodes().flatten().toArray()},this.fnGetPosition=function(e){var n=this.api(!0),t=e.nodeName.toUpperCase();return"TR"==t?n.row(e).index():"TD"==t||"TH"==t?[(t=n.cell(e).index()).row,t.columnVisible,t.column]:null},this.fnIsOpen=function(e){return this.api(!0).row(e).child.isShown()},this.fnOpen=function(e,t,n){return this.api(!0).row(e).child(t,n).show().child()[0]},this.fnPageChange=function(e,t){e=this.api(!0).page(e),t!==s&&!t||e.draw(!1)},this.fnSetColumnVis=function(e,t,n){e=this.api(!0).column(e).visible(t),n!==s&&!n||e.columns.adjust().draw()},this.fnSettings=function(){return de(this[d.iApiIndex])},this.fnSort=function(e){this.api(!0).order(e).draw()},this.fnSortListener=function(e,t,n){this.api(!0).order.listener(e,t,n)},this.fnUpdate=function(e,t,n,o,i){var a=this.api(!0);return(n===s||null===n?a.row(t):a.cell(t,n)).data(e),i!==s&&!i||a.columns.adjust(),o!==s&&!o||a.draw(),0},this.fnVersionCheck=d.fnVersionCheck;var i,c=this,l=n===s,u=this.length;for(i in l&&(n={}),this.oApi=this.internal=d.internal,o.ext.internal)i&&(this[i]=wt(i));return this.each(function(){var g,v,y,A,F,T,i=1<u?ge({},n,!0):n,a=0,d=this.getAttribute("id"),z=!1,p=o.defaults,f=e(this);if("table"!=this.nodeName.toLowerCase())b(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{ht(p),lt(p.column),w(p,p,!0),w(p.column,p.column,!0),w(p,e.extend(i,f.data()),!0);for(y=o.settings,a=0,v=y.length;a<v;a++){if(g=y[a],g.nTable==this||g.nTHead&&g.nTHead.parentNode==this||g.nTFoot&&g.nTFoot.parentNode==this){if(F=(i.bRetrieve!==s?i:p).bRetrieve,T=(i.bDestroy!==s?i:p).bDestroy,l||F)return g.oInstance;if(T){g.oInstance.fnDestroy();break}return void b(g,0,"Cannot reinitialise DataTable",3)}if(g.sTableId==this.id){y.splice(a,1);break}}null!==d&&""!==d||(d="DataTables_Table_"+o.ext._unique++,this.id=d);var _,O,t=e.extend(!0,{},o.models.oSettings,{sDestroyWidth:f[0].style.width,sInstance:d,sTableId:d}),x=(t.nTable=this,t.oApi=c.internal,t.oInit=i,y.push(t),t.oInstance=1===c.length?c:f.dataTable(),ht(i),De(i.oLanguage),i.aLengthMenu&&!i.iDisplayLength&&(i.iDisplayLength=(Array.isArray(i.aLengthMenu[0])?i.aLengthMenu[0]:i.aLengthMenu)[0]),i=ge(e.extend(!0,{},p),i),j(t.oFeatures,i,["bPaginate","bLengthChange","bFilter","bSort","bSortMulti","bInfo","bProcessing","bAutoWidth","bSortClasses","bServerSide","bDeferRender"]),j(t,i,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer","searchDelay","rowId",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"]]),j(t.oScroll,i,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),j(t.oLanguage,i,"fnInfoCallback"),m(t,"aoDrawCallback",i.fnDrawCallback,"user"),m(t,"aoServerParams",i.fnServerParams,"user"),m(t,"aoStateSaveParams",i.fnStateSaveParams,"user"),m(t,"aoStateLoadParams",i.fnStateLoadParams,"user"),m(t,"aoStateLoaded",i.fnStateLoaded,"user"),m(t,"aoRowCallback",i.fnRowCallback,"user"),m(t,"aoRowCreatedCallback",i.fnCreatedRow,"user"),m(t,"aoHeaderCallback",i.fnHeaderCallback,"user"),m(t,"aoFooterCallback",i.fnFooterCallback,"user"),m(t,"aoInitComplete",i.fnInitComplete,"user"),m(t,"aoPreDrawCallback",i.fnPreDrawCallback,"user"),t.rowIdFn=S(i.rowId),ct(t),t.oClasses),E=(e.extend(x,o.ext.classes,i.oClasses),f.addClass(x.sTable),t.iInitDisplayStart===s&&(t.iInitDisplayStart=i.iDisplayStart,t._iDisplayStart=i.iDisplayStart),null!==i.iDeferLoading&&(t.bDeferLoading=!0,d=Array.isArray(i.iDeferLoading),t._iRecordsDisplay=d?i.iDeferLoading[0]:i.iDeferLoading,t._iRecordsTotal=d?i.iDeferLoading[1]:i.iDeferLoading),t.oLanguage),d=(e.extend(!0,E,i.oLanguage),E.sUrl?(e.ajax({dataType:"json",url:E.sUrl,success:function(n){w(p.oLanguage,n),De(n),e.extend(!0,E,n,t.oInit.oLanguage),r(t,null,"i18n",[t]),$(t)},error:function(){$(t)}}),z=!0):r(t,null,"i18n",[t]),null===i.asStripeClasses&&(t.asStripeClasses=[x.sStripeOdd,x.sStripeEven]),t.asStripeClasses),M=f.children("tbody").find("tr").eq(0),k=(-1!==e.inArray(!0,e.map(d,function(e){return M.hasClass(e)}))&&(e("tbody tr",this).removeClass(d.join(" ")),t.asDestroyStripes=d.slice()),[]),d=this.getElementsByTagName("thead");if(0!==d.length&&(V(t.aoHeader,d[0]),k=he(t)),null===i.aoColumns)for(_=[],a=0,v=k.length;a<v;a++)_.push(null);else _=i.aoColumns;for(a=0,v=_.length;a<v;a++)He(t,k?k[a]:null);Qe(t,i.aoColumnDefs,_,function(e,n){re(t,e,n)}),M.length&&(O=function(e,t){return null!==e.getAttribute("data-"+t)?t:null},e(M[0]).children("th, td").each(function(e,n){var o,i=t.aoColumns[e];i||b(t,0,"Incorrect column count",18),i.mData===e&&(o=O(n,"sort")||O(n,"order"),n=O(n,"filter")||O(n,"search"),null===o&&null===n||(i.mData={_:e+".display",sort:null!==o?e+".@data-"+o:s,type:null!==o?e+".@data-"+o:s,filter:null!==n?e+".@data-"+n:s},re(t,e)))})),A=t.oFeatures,d=function(){if(i.aaSorting===s){o=t.aaSorting;for(a=0,v=o.length;a<v;a++)o[a][1]=t.aoColumns[a].asSorting[0]}ue(t),A.bSort&&m(t,"aoDrawCallback",function(){var n,s;t.bSorted&&(n=D(t),s={},e.each(n,function(e,t){s[t.src]=t.dir}),r(t,null,"order",[t,n,s]),Je(t))}),m(t,"aoDrawCallback",function(){(t.bSorted||"ssp"===h(t)||A.bDeferRender)&&ue(t)},"sc");var o,l=f.children("caption").each(function(){this._captionSide=e(this).css("caption-side")}),n=f.children("thead"),c=(0===n.length&&(n=e("<thead/>").appendTo(f)),t.nTHead=n[0],f.children("tbody")),n=(0===c.length&&(c=e("<tbody/>").insertAfter(n)),t.nTBody=c[0],f.children("tfoot"));if(0===(n=0===n.length&&0<l.length&&(""!==t.oScroll.sX||""!==t.oScroll.sY)?e("<tfoot/>").appendTo(f):n).length||0===n.children().length?f.addClass(x.sNoFooter):0<n.length&&(t.nTFoot=n[0],V(t.aoFooter,t.nTFoot)),i.aaData)for(a=0;a<i.aaData.length;a++)C(t,i.aaData[a]);else!t.bDeferLoading&&"dom"!=h(t)||le(t,e(t.nTBody).children("tr"));t.aiDisplay=t.aiDisplayMaster.slice(),!(t.bInitialised=!0)===z&&$(t)},m(t,"aoDrawCallback",I,"state_save"),i.bStateSave?(A.bStateSave=!0,it(t,0,d)):d()}}),c=null,this},Ee={},Nt=/[\r\n\u2028]/g,ie=/<.*?>/g,Wt=/^\d{2,4}[./-]\d{1,2}[./-]\d{1,2}([T ]{1}\d{1,2}[:.]\d{2}([.:]\d{2})?)?$/,Ut=new RegExp("(\\"+["/",".","*","+","?","|","(",")","[","]","{","}","\\","$","^","-"].join("|\\")+")","g"),Ae=/['\u00A0,$£€¥%\u2009\u202F\u20BD\u20a9\u20BArfkɃΞ]/gi,_=function(e){return!e||!0===e||"-"===e},kt=function(e,t){return Ee[t]||(Ee[t]=new RegExp(xe(t),"g")),"string"==typeof e&&"."!==t?e.replace(/\./g,"").replace(Ee[t],"."):e},v=function(e,t,n){var i=[],o=0,a=e.length;if(n!==s)for(;o<a;o++)e[o]&&e[o][t]&&i.push(e[o][t][n]);else for(;o<a;o++)e[o]&&i.push(e[o][t]);return i},Kt=function(e){if(!(e.length<2))for(var t=e.slice().sort(),s=t[0],n=1,o=t.length;n<o;n++){if(t[n]===s)return!1;s=t[n]}return!0},Z=function(e){if(Kt(e))return e.slice();var t,n,s,o=[],a=e.length,i=0;t:for(t=0;t<a;t++){for(s=e[t],n=0;n<i;n++)if(o[n]===s)continue t;o.push(s),i++}return o},gt=function(e,t){if(Array.isArray(t))for(var n=0;n<t.length;n++)gt(e,t[n]);else e.push(t);return e},tt,ae,we,ye,je;function W(t){var n,s,o={};e.each(t,function(e){(n=e.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(n[1]+" ")&&(s=e.replace(n[0],n[2].toLowerCase()),o[s]=e,"o"===n[1])&&W(t[e])}),t._hungarianMap=o}function w(t,n,o){var i;t._hungarianMap||W(t),e.each(n,function(a){(i=t._hungarianMap[a])===s||!o&&n[i]!==s||("o"===i.charAt(0)?(n[i]||(n[i]={}),e.extend(!0,n[i],n[a]),w(t[i],n[i],o)):n[i]=n[a])})}function De(e){var t,n=o.defaults.oLanguage,s=n.sDecimal;s&&Ce(s),e&&(t=e.sZeroRecords,!e.sEmptyTable&&t&&"No data available in table"===n.sEmptyTable&&j(e,e,"sZeroRecords","sEmptyTable"),!e.sLoadingRecords&&t&&"Loading..."===n.sLoadingRecords&&j(e,e,"sZeroRecords","sLoadingRecords"),e.sInfoThousands&&(e.sThousands=e.sInfoThousands),t=e.sDecimal)&&s!==t&&Ce(t)}Array.isArray||(Array.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)}),Array.prototype.includes||(Array.prototype.includes=Pt),String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}),String.prototype.includes||(String.prototype.includes=Pt),o.util={throttle:function(e,t){var n,o,i=t!==s?t:200;return function(){var t=this,a=+new Date,r=arguments;n&&a<n+i?(clearTimeout(o),o=setTimeout(function(){n=s,e.apply(t,r)},i)):(n=a,e.apply(t,r))}},escapeRegex:function(e){return e.replace(Ut,"\\$1")},set:function(t){var n;return e.isPlainObject(t)?o.util.set(t._):null===t?function(){}:"function"==typeof t?function(e,n,s){t(e,"set",n,s)}:"string"!=typeof t||-1===t.indexOf(".")&&-1===t.indexOf("[")&&-1===t.indexOf("(")?function(e,n){e[t]=n}:(n=function(e,t,o){for(var r,c,l,d,u,h,i=Ke(o),o=i[i.length-1],a=0,m=i.length-1;a<m;a++){if("__proto__"===i[a]||"constructor"===i[a])throw new Error("Cannot set prototype values");if(r=i[a].match(M),l=i[a].match(A),r){if(i[a]=i[a].replace(M,""),e[i[a]]=[],(r=i.slice()).splice(0,a+1),u=r.join("."),Array.isArray(t))for(c=0,h=t.length;c<h;c++)n(d={},t[c],u),e[i[a]].push(d);else e[i[a]]=t;return}l&&(i[a]=i[a].replace(A,""),e=e[i[a]](t)),null!==e[i[a]]&&e[i[a]]!==s||(e[i[a]]={}),e=e[i[a]]}o.match(A)?e[o.replace(A,"")](t):e[o.replace(M,"")]=t},function(e,s){return n(e,s,t)})},get:function(t){var n,i;return e.isPlainObject(t)?(n={},e.each(t,function(e,t){t&&(n[e]=o.util.get(t))}),function(e,t,o,i){var a=n[t]||n._;return a!==s?a(e,t,o,i):e}):null===t?function(e){return e}:"function"==typeof t?function(e,n,s,o){return t(e,n,s,o)}:"string"!=typeof t||-1===t.indexOf(".")&&-1===t.indexOf("[")&&-1===t.indexOf("(")?function(e){return e[t]}:(i=function(e,t,n){if(""!==n)for(var r,c,l,d,u,h,o=Ke(n),a=0,m=o.length;a<m;a++){if(r=o[a].match(M),d=o[a].match(A),r){if(o[a]=o[a].replace(M,""),""!==o[a]&&(e=e[o[a]]),c=[],o.splice(0,a+1),u=o.join("."),Array.isArray(e))for(l=0,h=e.length;l<h;l++)c.push(i(e[l],t,u));r=r[0].substring(1,r[0].length-1),e=""===r?c:c.join(r);break}if(d)o[a]=o[a].replace(A,""),e=e[o[a]]();else{if(null===e||e[o[a]]===s)return s;e=e[o[a]]}}return e},function(e,n){return i(e,n,t)})}},f=function(e,t,n){e[t]!==s&&(e[n]=e[t])};function ht(e){if(f(e,"ordering","bSort"),f(e,"orderMulti","bSortMulti"),f(e,"orderClasses","bSortClasses"),f(e,"orderCellsTop","bSortCellsTop"),f(e,"order","aaSorting"),f(e,"orderFixed","aaSortingFixed"),f(e,"paging","bPaginate"),f(e,"pagingType","sPaginationType"),f(e,"pageLength","iDisplayLength"),f(e,"searching","bFilter"),"boolean"==typeof e.sScrollX&&(e.sScrollX=e.sScrollX?"100%":""),"boolean"==typeof e.scrollX&&(e.scrollX=e.scrollX?"100%":""),t=e.aoSearchCols,t)for(var t,n=0,s=t.length;n<s;n++)t[n]&&w(o.models.oSearch,t[n])}function lt(e){f(e,"orderable","bSortable"),f(e,"orderData","aDataSort"),f(e,"orderSequence","asSorting"),f(e,"orderDataType","sortDataType");var t=e.aDataSort;"number"!=typeof t||Array.isArray(t)||(e.aDataSort=[t])}function ct(n){var s,i,a,r;o.__browser||(o.__browser=s={},r=(i=(a=e("<div/>").css({position:"fixed",top:0,left:-1*e(t).scrollLeft(),height:1,width:1,overflow:"hidden"}).append(e("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(e("<div/>").css({width:"100%",height:10}))).appendTo("body")).children()).children(),s.barWidth=i[0].offsetWidth-i[0].clientWidth,s.bScrollOversize=100===r[0].offsetWidth&&100!==i[0].clientWidth,s.bScrollbarLeft=1!==Math.round(r.offset().left),s.bBounding=!!a[0].getBoundingClientRect().width,a.remove()),e.extend(n.oBrowser,o.__browser),n.oScroll.iBarWidth=o.__browser.barWidth}function rt(e,t,n,o,i,a){var c,r=o,l=!1;for(n!==s&&(c=n,l=!0);r!==i;)e.hasOwnProperty(r)&&(c=l?t(c,e[r],r,e):e[r],l=!0,r+=a);return c}function He(t,s){var i=o.defaults.column,a=t.aoColumns.length,i=e.extend({},o.models.oColumn,i,{nTh:s||n.createElement("th"),sTitle:i.sTitle||(s?s.innerHTML:""),aDataSort:i.aDataSort||[a],mData:i.mData||a,idx:a}),i=(t.aoColumns.push(i),t.aoPreSearchCols);i[a]=e.extend({},o.models.oSearch,i[a]),re(t,a,e(s).data())}function re(t,n,i){function d(e){return"string"==typeof e&&-1!==e.indexOf("@")}var n=t.aoColumns[n],a=t.oClasses,l=e(n.nTh),c=(!n.sWidthOrig&&(n.sWidthOrig=l.attr("width")||null,r=(l.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/))&&(n.sWidthOrig=r[1]),i!==s&&null!==i&&(lt(i),w(o.defaults.column,i,!0),i.mDataProp===s||i.mData||(i.mData=i.mDataProp),i.sType&&(n._sManualType=i.sType),i.className&&!i.sClass&&(i.sClass=i.className),i.sClass&&l.addClass(i.sClass),r=n.sClass,e.extend(n,i),j(n,i,"sWidth","sWidthOrig"),r!==n.sClass&&(n.sClass=r+" "+n.sClass),i.iDataSort!==s&&(n.aDataSort=[i.iDataSort]),j(n,i,"aDataSort")),n.mData),h=S(c),u=n.mRender?S(n.mRender):null,r=(n._bAttrSrc=e.isPlainObject(c)&&(d(c.sort)||d(c.type)||d(c.filter)),n._setter=null,n.fnGetData=function(e,t,n){var o=h(e,t,s,n);return u&&t?u(o,t,e,n):o},n.fnSetData=function(e,t,n){return O(c)(e,t,n)},"number"!=typeof c&&(t._rowReadObject=!0),t.oFeatures.bSort||(n.bSortable=!1,l.addClass(a.sSortableNone)),-1!==e.inArray("asc",n.asSorting)),i=-1!==e.inArray("desc",n.asSorting);n.bSortable&&(r||i)?r&&!i?(n.sSortingClass=a.sSortableAsc,n.sSortingClassJUI=a.sSortJUIAscAllowed):!r&&i?(n.sSortingClass=a.sSortableDesc,n.sSortingClassJUI=a.sSortJUIDescAllowed):(n.sSortingClass=a.sSortable,n.sSortingClassJUI=a.sSortJUI):(n.sSortingClass=a.sSortableNone,n.sSortingClassJUI="")}function R(e){if(!1!==e.oFeatures.bAutoWidth){t=e.aoColumns,Ue(e);for(var t,s,n=0,o=t.length;n<o;n++)t[n].nTh.style.width=t[n].sWidth}s=e.oScroll,""===s.sY&&""===s.sX||se(e),r(e,null,"column-sizing",[e])}function P(e,t){return e=pe(e,"bVisible"),"number"==typeof e[t]?e[t]:null}function H(t,n){return t=pe(t,"bVisible"),n=e.inArray(n,t),-1!==n?n:null}function F(t){var n=0;return e.each(t.aoColumns,function(t,s){s.bVisible&&"none"!==e(s.nTh).css("display")&&n++}),n}function pe(t,n){var s=[];return e.map(t.aoColumns,function(e,t){e[n]&&s.push(t)}),s}function Be(e){for(var t,n,i,a,r,d,u,h=e.aoColumns,m=e.aoData,l=o.ext.type.detect,c=0,f=h.length;c<f;c++)if(a=[],!(n=h[c]).sType&&n._sManualType)n.sType=n._sManualType;else if(!n.sType){for(i=0,d=l.length;i<d;i++){for(t=0,u=m.length;t<u&&(a[t]===s&&(a[t]=p(e,t,c,"type")),(r=l[i](a[t],e))||i===l.length-1)&&("html"!==r||_(a[t]));t++);if(r){n.sType=r;break}}n.sType||(n.sType="string")}}function Qe(t,n,o,i){if(u=t.aoColumns,n)for(c=n.length-1;0<=c;c--)for(var c,l,d,u,h,m,a=(l=n[c]).target!==s?l.target:l.targets!==s?l.targets:l.aTargets,r=0,f=(a=Array.isArray(a)?a:[a]).length;r<f;r++)if("number"==typeof a[r]&&0<=a[r]){for(;u.length<=a[r];)He(t);i(a[r],l)}else if("number"==typeof a[r]&&a[r]<0)i(u.length+a[r],l);else if("string"==typeof a[r])for(d=0,m=u.length;d<m;d++)"_all"!=a[r]&&!e(u[d].nTh).hasClass(a[r])||i(d,l);if(o)for(c=0,h=o.length;c<h;c++)i(c,o[c])}function C(t,n,i,a){for(var r=t.aoData.length,c=e.extend(!0,{},o.models.oRow,{src:i?"dom":"data",idx:r}),d=(c._aData=n,t.aoData.push(c),t.aoColumns),l=0,u=d.length;l<u;l++)d[l].sType=null;return t.aiDisplayMaster.push(r),n=t.rowIdFn(n),n!==s&&(t.aIds[n]=c),!i&&t.oFeatures.bDeferRender||Ie(t,r,i,a),r}function le(t,n){var s;return(n=n instanceof e?n:e(n)).map(function(e,n){return s=Ve(t,n),C(t,s.data,n,s.cells)})}function p(e,t,n,i){"search"===i?i="filter":"order"===i&&(i="sort");var d=e.iDraw,r=e.aoColumns[n],l=e.aoData[t]._aData,c=r.sDefaultContent,a=r.fnGetData(l,i,{settings:e,row:t,col:n});if(a===s)return e.iDrawError!=d&&null===c&&(b(e,0,"Requested unknown parameter "+("function"==typeof r.mData?"{function}":"'"+r.mData+"'")+" for row "+t+", column "+n,4),e.iDrawError=d),c;if(a!==l&&null!==a||null===c||i===s){if("function"==typeof a)return a.call(l)}else a=c;return null===a&&"display"===i?"":"filter"===i&&(t=o.ext.type.search)[r.sType]?t[r.sType](a):a}function Xe(e,t,n,s){var o=e.aoColumns[n],i=e.aoData[t]._aData;o.fnSetData(i,s,{settings:e,row:t,col:n})}M=/\[.*?\]$/,A=/\(\)$/;function Ke(t){return e.map(t.match(/(\\.|[^.])+/g)||[""],function(e){return e.replace(/\\\./g,".")})}S=o.util.get,O=o.util.set;function $e(e){return v(e.aoData,"_aData")}function ee(e){e.aoData.length=0,e.aiDisplayMaster.length=0,e.aiDisplay.length=0,e.aIds={}}function te(e,t,n){for(var i=-1,o=0,a=e.length;o<a;o++)e[o]==t?i=o:e[o]>t&&e[o]--;-1!=i&&n===s&&e.splice(i,1)}function q(e,t,n,o){function d(n,s){for(;n.childNodes.length;)n.removeChild(n.firstChild);n.innerHTML=p(e,t,s,"display")}var i,r,c,l,a=e.aoData[t];if("dom"!==n&&(n&&"auto"!==n||"dom"!==a.src)){if(r=a.anCells,r)if(o!==s)d(r[o],o);else for(i=0,c=r.length;i<c;i++)d(r[i],i)}else a._aData=Ve(e,a,o,o===s?s:a._aData).data;if(a._aSortData=null,a._aFilterData=null,l=e.aoColumns,o!==s)l[o].sType=null;else{for(i=0,c=l.length;i<c;i++)l[i].sType=null;Pe(e,a)}}function Ve(e,t,n,o){function u(e,t){var n;"string"==typeof e&&-1!==(n=e.indexOf("@"))&&(n=e.substring(n+1),O(e)(o,t.getAttribute(n)))}function h(e){n!==s&&n!==l||(i=g[l],r=e.innerHTML.trim(),i&&i._bAttrSrc?(O(i.mData._)(o,r),u(i.mData.sort,e),u(i.mData.type,e),u(i.mData.filter,e)):f?(i._setter||(i._setter=O(i.mData)),i._setter(o,r)):o[l]=r),l++}var t,i,r,d,m,p,c=[],a=t.firstChild,l=0,g=e.aoColumns,f=e._rowReadObject;if(o=o!==s?o:f?{}:[],a)for(;a;)"TD"!=(m=a.nodeName.toUpperCase())&&"TH"!=m||(h(a),c.push(a)),a=a.nextSibling;else for(d=0,p=(c=t.anCells).length;d<p;d++)h(c[d]);return t=t.firstChild?t:t.nTr,t&&(t=t.getAttribute("id"))&&O(e.rowId)(o,t),{data:o,cells:c}}function Ie(t,s,o,i){var a,c,l,d,m,f,u=t.aoData[s],g=u._aData,h=[];if(null===u.nTr){for(d=o||n.createElement("tr"),u.nTr=d,u.anCells=h,d._DT_RowIndex=s,Pe(t,u),c=0,m=t.aoColumns.length;c<m;c++)a=t.aoColumns[c],(l=(f=!o)?n.createElement(a.sCellType):i[c])||b(t,0,"Incorrect column count",18),l._DT_CellIndex={row:s,column:c},h.push(l),!f&&(!a.mRender&&a.mData===c||e.isPlainObject(a.mData)&&a.mData._===c+".display")||(l.innerHTML=p(t,s,c,"display")),a.sClass&&(l.className+=" "+a.sClass),a.bVisible&&!o?d.appendChild(l):!a.bVisible&&o&&l.parentNode.removeChild(l),a.fnCreatedCell&&a.fnCreatedCell.call(t.oInstance,l,p(t,s,c),g,s,c);r(t,"aoRowCreatedCallback",null,[d,g,s,h])}}function Pe(t,n){var o=n.nTr,s=n._aData;o&&((t=t.rowIdFn(s))&&(o.id=t),s.DT_RowClass&&(t=s.DT_RowClass.split(" "),n.__rowc=n.__rowc?Z(n.__rowc.concat(t)):t,e(o).removeClass(n.__rowc.join(" ")).addClass(s.DT_RowClass)),s.DT_RowAttr&&e(o).attr(s.DT_RowAttr),s.DT_RowData)&&e(o).data(s.DT_RowData)}function mt(t){var n,o,d,i=t.nTHead,u=t.nTFoot,a=0===e("th, td",i).length,r=t.oClasses,c=t.aoColumns;for(a&&(d=e("<tr/>").appendTo(i)),s=0,l=c.length;s<l;s++)n=c[s],o=e(n.nTh).addClass(n.sClass),a&&o.appendTo(d),t.oFeatures.bSort&&(o.addClass(n.sSortingClass),!1!==n.bSortable)&&(o.attr("tabindex",t.iTabIndex).attr("aria-controls",t.sTableId),We(t,n.nTh,s)),n.sTitle!=o[0].innerHTML&&o.html(n.sTitle),Te(t,"header")(t,o,n,r);if(a&&V(t.aoHeader,i),e(i).children("tr").children("th, td").addClass(r.sHeaderTH),e(u).children("tr").children("th, td").addClass(r.sFooterTH),null!==u)for(var h=t.aoFooter[0],s=0,l=h.length;s<l;s++)(n=c[s])?(n.nTf=h[s].cell,n.sClass&&e(n.nTf).addClass(n.sClass)):b(t,0,"Incorrect column count",18)}function K(t,n,o){var i,a,c,l,u,h,m,f,p,r=[],d=[],g=t.aoColumns.length;if(n){for(o===s&&(o=!1),i=0,u=n.length;i<u;i++){for(r[i]=n[i].slice(),r[i].nTr=n[i].nTr,a=g-1;0<=a;a--)t.aoColumns[a].bVisible||o||r[i].splice(a,1);d.push([])}for(i=0,u=r.length;i<u;i++){if(m=r[i].nTr)for(;p=m.firstChild;)m.removeChild(p);for(a=0,f=r[i].length;a<f;a++)if(l=c=1,d[i][a]===s){for(m.appendChild(r[i][a].cell),d[i][a]=1;r[i+c]!==s&&r[i][a].cell==r[i+c][a].cell;)d[i+c][a]=1,c++;for(;r[i][a+l]!==s&&r[i][a].cell==r[i][a+l].cell;){for(h=0;h<c;h++)d[i+h][a+l]=1;l++}e(r[i][a].cell).attr("rowspan",c).attr("colspan",l)}}}}function x(t,n){if(a="ssp"==h(o=t),(i=o.iInitDisplayStart)!==s&&-1!==i&&(o._iDisplayStart=!a&&i>=o.fnRecordsDisplay()?0:i,o.iInitDisplayStart=-1),a=r(t,"aoPreDrawCallback","preDraw",[t]),-1!==e.inArray(!1,a))g(t,!1);else{var l,_,j=[],v=0,m=t.asStripeClasses,p=m.length,i=t.oLanguage,o="ssp"==h(t),d=t.aiDisplay,a=t._iDisplayStart,f=t.fnDisplayEnd();if(t.bDrawing=!0,t.bDeferLoading)t.bDeferLoading=!1,t.iDraw++,g(t,!1);else if(o){if(!t.bDestroying&&!n)return void Rt(t)}else t.iDraw++;if(0!==d.length)for(_=o?t.aoData.length:f,l=o?0:a;l<_;l++){var u,b=d[l],c=t.aoData[b],y=(null===c.nTr&&Ie(t,b),c.nTr);0!==p&&(u=m[v%p],c._sRowStripe!=u)&&(e(y).removeClass(c._sRowStripe).addClass(u),c._sRowStripe=u),r(t,"aoRowCallback",null,[y,c._aData,v,l,b]),j.push(y),v++}else n=i.sZeroRecords,1==t.iDraw&&"ajax"==h(t)?n=i.sLoadingRecords:i.sEmptyTable&&0===t.fnRecordsTotal()&&(n=i.sEmptyTable),j[0]=e("<tr/>",{class:p?m[0]:""}).append(e("<td />",{valign:"top",colSpan:F(t),class:t.oClasses.sRowEmpty}).html(n))[0];r(t,"aoHeaderCallback","header",[e(t.nTHead).children("tr")[0],$e(t),a,f,d]),r(t,"aoFooterCallback","footer",[e(t.nTFoot).children("tr")[0],$e(t),a,f,d]),o=e(t.nTBody),o.children().detach(),o.append(e(j)),r(t,"aoDrawCallback","draw",[t]),t.bSorted=!1,t.bFiltered=!1,t.bDrawing=!1}}function E(e,t){var n=e.oFeatures,s=n.bSort,n=n.bFilter;s&&Ze(e),n?B(e,e.oPreviousSearch):e.aiDisplay=e.aiDisplayMaster.slice(),!0!==t&&(e._iDisplayStart=0),e._drawHold=t,x(e),e._drawHold=!1}function ft(t){for(var n,s,i,r,l,u,g,m=t.oClasses,f=e(t.nTable),f=e("<div/>").insertBefore(f),d=t.oFeatures,c=e("<div/>",{id:t.sTableId+"_wrapper",class:m.sWrapper+(t.nTFoot?"":" "+m.sNoFooter)}),h=(t.nHolding=f[0],t.nTableWrapper=c[0],t.nTableReinsertBefore=t.nTable.nextSibling,t.sDom.split("")),a=0;a<h.length;a++){if(i=null,"<"==(s=h[a])){if(l=e("<div/>")[0],"'"==(g=h[a+1])||'"'==g){for(n="",u=2;h[a+u]!=g;)n+=h[a+u],u++;"H"==n?n=m.sJUIHeader:"F"==n&&(n=m.sJUIFooter),-1!=n.indexOf(".")?(r=n.split("."),l.id=r[0].substr(1,r[0].length-1),l.className=r[1]):"#"==n.charAt(0)?l.id=n.substr(1,n.length-1):l.className=n,a+=u}c.append(l),c=e(l)}else if(">"==s)c=c.parent();else if("l"==s&&d.bPaginate&&d.bLengthChange)i=ut(t);else if("f"==s&&d.bFilter)i=Et(t);else if("r"==s&&d.bProcessing)i=ot(t);else if("t"==s)i=nt(t);else if("i"==s&&d.bInfo)i=Ye(t);else if("p"==s&&d.bPaginate)i=qe(t);else if(0!==o.ext.feature.length)for(var v=o.ext.feature,p=0,b=v.length;p<b;p++)if(s==v[p].cFeature){i=v[p].fnInit(t);break}i&&((r=t.aanFeatures)[s]||(r[s]=[]),r[s].push(i),c.append(i))}f.replaceWith(c),t.nHolding=null}function V(t,n){var s,o,i,a,r,c,l,u,h,m,d=e(n).children("tr");for(t.splice(0,t.length),s=0,l=d.length;s<l;s++)t.push([]);for(s=0,l=d.length;s<l;s++)for(o=(u=d[s]).firstChild;o;){if("TD"==o.nodeName.toUpperCase()||"TH"==o.nodeName.toUpperCase())for(i=(i=+o.getAttribute("colspan"))&&0!=i&&1!=i?i:1,a=(a=+o.getAttribute("rowspan"))&&0!=a&&1!=a?a:1,h=function(e,t,n){for(var s=e[t];s[n];)n++;return n}(t,s,0),m=1==i,c=0;c<i;c++)for(r=0;r<a;r++)t[s+r][h+c]={cell:o,unique:m},t[s+r].nTr=u;o=o.nextSibling}}function he(e,t,n){i=[],n||(n=e.aoHeader,t&&V(n=[],t));for(var s,i,a,o=0,r=n.length;o<r;o++)for(s=0,a=n[o].length;s<a;s++)!n[o][s].unique||i[s]&&e.bSortCellsTop||(i[s]=n[o][s].cell);return i}function me(t,n,s){function l(e){var n=t.jqXHR?t.jqXHR.status:null;(null===e||"number"==typeof n&&204==n)&&Y(t,e={},[]),(n=e.error||e.sError)&&b(t,0,n),t.json=e,r(t,null,"xhr",[t,e,t.jqXHR]),s(e)}r(t,"aoServerParams","serverParams",[n]),n&&Array.isArray(n)&&(i={},d=/(.*?)\[\]$/,e.each(n,function(e,t){var n=t.name.match(d);n?(n=n[0],i[n]||(i[n]=[]),i[n].push(t.value)):i[t.name]=t.value}),n=i);var i,c,d,o=t.ajax,u=t.oInstance,a=(e.isPlainObject(o)&&o.data&&(a="function"==typeof(c=o.data)?c(n,t):c,n="function"==typeof c&&a?a:e.extend(!0,n,a),delete o.data),{data:n,success:l,dataType:"json",cache:!1,type:t.sServerMethod,error:function(n,s){var i=r(t,null,"xhr",[t,null,t.jqXHR]);-1===e.inArray(!0,i)&&("parsererror"==s?b(t,0,"Invalid JSON response",1):4===n.readyState&&b(t,0,"Ajax error",7)),g(t,!1)}});t.oAjaxData=n,r(t,null,"preXhr",[t,n]),t.fnServerData?t.fnServerData.call(u,t.sAjaxSource,e.map(n,function(e,t){return{name:t,value:e}}),l,t):t.sAjaxSource||"string"==typeof o?t.jqXHR=e.ajax(e.extend(a,{url:o||t.sAjaxSource})):"function"==typeof o?t.jqXHR=o.call(u,n,l,t):(t.jqXHR=e.ajax(e.extend(a,o)),o.data=c)}function Rt(e){e.iDraw++,g(e,!0),me(e,Tt(e),function(t){at(e,t)})}function Tt(t){for(var i,r,m,u=t.aoColumns,g=u.length,c=t.oFeatures,d=t.oPreviousSearch,b=t.aoPreSearchCols,h=[],f=D(t),a=t._iDisplayStart,p=!1!==c.bPaginate?t._iDisplayLength:-1,n=function(e,t){h.push({name:e,value:t})},l=(n("sEcho",t.iDraw),n("iColumns",g),n("sColumns",v(u,"sName").join(",")),n("iDisplayStart",a),n("iDisplayLength",p),{draw:t.iDraw,columns:[],order:[],start:a,length:p,search:{value:d.sSearch,regex:d.bRegex}}),s=0;s<g;s++)i=u[s],r=b[s],m="function"==typeof i.mData?"function":i.mData,l.columns.push({data:m,name:i.sName,searchable:i.bSearchable,orderable:i.bSortable,search:{value:r.sSearch,regex:r.bRegex}}),n("mDataProp_"+s,m),c.bFilter&&(n("sSearch_"+s,r.sSearch),n("bRegex_"+s,r.bRegex),n("bSearchable_"+s,i.bSearchable)),c.bSort&&n("bSortable_"+s,i.bSortable);return c.bFilter&&(n("sSearch",d.sSearch),n("bRegex",d.bRegex)),c.bSort&&(e.each(f,function(e,t){l.order.push({column:t.col,dir:t.dir}),n("iSortCol_"+e,t.col),n("sSortDir_"+e,t.dir)}),n("iSortingCols",f.length)),a=o.ext.legacy.ajax,null===a?t.sAjaxSource?h:l:a?h:l}function at(e,t){function i(e,n){return t[e]!==s?t[e]:t[n]}var o,r,n=Y(e,t),a=i("sEcho","draw"),c=i("iTotalRecords","recordsTotal"),l=i("iTotalDisplayRecords","recordsFiltered");if(a!==s){if(+a<e.iDraw)return;e.iDraw=+a}n=n||[],ee(e),e._iRecordsTotal=parseInt(c,10),e._iRecordsDisplay=parseInt(l,10);for(o=0,r=n.length;o<r;o++)C(e,n[o]);e.aiDisplay=e.aiDisplayMaster.slice(),x(e,!0),e._bInitComplete||J(e,t),g(e,!1)}function Y(t,n,o){if(t=e.isPlainObject(t.ajax)&&t.ajax.dataSrc!==s?t.ajax.dataSrc:t.sAjaxDataProp,!o)return"data"===t?n.aaData||n[t]:""!==t?S(t)(n):n;O(t)(n,o)}function Et(t){function r(e){u.f;var n=this.value||"";s.return&&"Enter"!==e.key||n!=s.sSearch&&(B(t,{sSearch:n,bRegex:s.bRegex,bSmart:s.bSmart,bCaseInsensitive:s.bCaseInsensitive,return:s.return}),t._iDisplayStart=0,x(t))}var o=t.oClasses,l=t.sTableId,d=t.oLanguage,s=t.oPreviousSearch,u=t.aanFeatures,i='<input type="search" class="'+o.sFilterInput+'"/>',a=(a=d.sSearch).match(/_INPUT_/)?a.replace("_INPUT_",i):a+i,i=e("<div/>",{id:u.f?null:l+"_filter",class:o.sFilter}).append(e("<label/>").append(a)),o=null!==t.searchDelay?t.searchDelay:"ssp"===h(t)?400:0,c=e("input",i).val(s.sSearch).attr("placeholder",d.sSearchPlaceholder).on("keyup.DT search.DT input.DT paste.DT cut.DT",o?ae(r,o):r).on("mouseup",function(e){setTimeout(function(){r.call(c[0],e)},10)}).on("keypress.DT",function(e){if(13==e.keyCode)return!1}).attr("aria-controls",l);return e(t.nTable).on("search.dt.DT",function(e,o){if(t===o)try{c[0]!==n.activeElement&&c.val(s.sSearch)}catch{}}),i[0]}function B(e,t,n){function c(e){i.sSearch=e.sSearch,i.bRegex=e.bRegex,i.bSmart=e.bSmart,i.bCaseInsensitive=e.bCaseInsensitive,i.return=e.return}function l(e){return e.bEscapeRegex!==s?!e.bEscapeRegex:e.bRegex}var o,i=e.oPreviousSearch,a=e.aoPreSearchCols;if(Be(e),"ssp"!=h(e)){It(e,t.sSearch,n,l(t),t.bSmart,t.bCaseInsensitive,t.return),c(t);for(o=0;o<a.length;o++)Lt(e,a[o].sSearch,o,l(a[o]),a[o].bSmart,a[o].bCaseInsensitive);zt(e)}else c(t);e.bFiltered=!0,r(e,null,"search",[e])}function zt(t){for(var n,a,c=o.ext.search,s=t.aiDisplay,r=0,d=c.length;r<d;r++){for(var l=[],i=0,u=s.length;i<u;i++)n=s[i],a=t.aoData[n],c[r](t,a._aFilterData,n,a._aData,i)&&l.push(n);s.length=0,e.merge(s,l)}}function Lt(e,t,n,s,o,i){if(""!==t){for(var c,l=[],r=e.aiDisplay,d=Oe(t,s,o,i),a=0;a<r.length;a++)c=e.aoData[r[a]]._aFilterData[n],d.test(c)&&l.push(r[a]);e.aiDisplay=l}}function It(e,t,n,s,i,a){var r,c,l,u=Oe(t,s,i,a),i=e.oPreviousSearch.sSearch,a=e.aiDisplayMaster,d=[];if(0!==o.ext.search.length&&(n=!0),l=Mt(e),t.length<=0)e.aiDisplay=a.slice();else{for((l||n||s||i.length>t.length||0!==t.indexOf(i)||e.bSorted)&&(e.aiDisplay=a.slice()),c=e.aiDisplay,r=0;r<c.length;r++)u.test(e.aoData[c[r]]._sFilterRow)&&d.push(c[r]);e.aiDisplay=d}}function Oe(t,n,s,o){return t=n?t:xe(t),s&&(t="^(?=.*?"+e.map(t.match(/"[^"]+"|[^ ]+/g)||[""],function(e){var t;return(e='"'===e.charAt(0)&&(t=e.match(/^"(.*)"$/))?t[1]:e).replace('"',"")}).join(")(?=.*?")+").*$"),new RegExp(t,o?"i":"")}var xe=o.util.escapeRegex,fe=e("<div>")[0],Vt=fe.textContent!==s;function Mt(e){for(var t,n,s,i,a,r=e.aoColumns,c=!1,o=0,l=e.aoData.length;o<l;o++)if(!(i=e.aoData[o])._aFilterData){for(s=[],n=0,a=r.length;n<a;n++)r[n].bSearchable?"string"!=typeof(t=null===(t=p(e,o,n,"filter"))?"":t)&&t.toString&&(t=t.toString()):t="",t.indexOf&&-1!==t.indexOf("&")&&(fe.innerHTML=t,t=Vt?fe.textContent:fe.innerText),t.replace&&(t=t.replace(/[\r\n\u2028]/g,"")),s.push(t);i._aFilterData=s,i._sFilterRow=s.join("  "),c=!0}return c}function At(e){return{search:e.sSearch,smart:e.bSmart,regex:e.bRegex,caseInsensitive:e.bCaseInsensitive}}function _t(e){return{sSearch:e.search,bSmart:e.smart,bRegex:e.regex,bCaseInsensitive:e.caseInsensitive}}function Ye(t){var n=t.sTableId,s=t.aanFeatures.i,o=e("<div/>",{class:t.oClasses.sInfo,id:s?null:n+"_info"});return s||(t.aoDrawCallback.push({fn:jt,sName:"information"}),o.attr("role","status").attr("aria-live","polite"),e(t.nTable).attr("aria-describedby",n+"_info")),o[0]}function jt(t){var n,s,o,i,a,r,c=t.aanFeatures.i;0!==c.length&&(n=t.oLanguage,a=t._iDisplayStart+1,r=t.fnDisplayEnd(),o=t.fnRecordsTotal(),s=(i=t.fnRecordsDisplay())?n.sInfo:n.sInfoEmpty,i!==o&&(s+=" "+n.sInfoFiltered),s=pt(t,s+=n.sInfoPostFix),null!==(n=n.fnInfoCallback)&&(s=n.call(t.oInstance,t,a,r,o,i,s)),e(c).html(s))}function pt(e,t){var n=e.fnFormatNumber,o=e._iDisplayStart+1,s=e._iDisplayLength,i=e.fnRecordsDisplay(),a=-1===s;return t.replace(/_START_/g,n.call(e,o)).replace(/_END_/g,n.call(e,e.fnDisplayEnd())).replace(/_MAX_/g,n.call(e,e.fnRecordsTotal())).replace(/_TOTAL_/g,n.call(e,i)).replace(/_PAGE_/g,n.call(e,a?1:Math.ceil(o/s))).replace(/_PAGES_/g,n.call(e,a?1:Math.ceil(i/s)))}function $(e){var t,s,o,a=e.iInitDisplayStart,i=e.aoColumns,n=e.oFeatures,c=e.bDeferLoading;if(e.bInitialised){for(ft(e),mt(e),K(e,e.aoHeader),K(e,e.aoFooter),g(e,!0),n.bAutoWidth&&Ue(e),t=0,o=i.length;t<o;t++)(s=i[t]).sWidth&&(s.nTh.style.width=l(s.sWidth));r(e,null,"preInit",[e]),E(e),n=h(e),"ssp"==n&&!c||("ajax"==n?me(e,[],function(n){var s=Y(e,n);for(t=0;t<s.length;t++)C(e,s[t]);e.iInitDisplayStart=a,E(e),g(e,!1),J(e,n)}):(g(e,!1),J(e)))}else setTimeout(function(){$(e)},200)}function J(e,t){e._bInitComplete=!0,(t||e.oInit.aaData)&&R(e),r(e,null,"plugin-init",[e,t]),r(e,"aoInitComplete","init",[e,t])}function Ne(e,t){t=parseInt(t,10),e._iDisplayLength=t,ze(e),r(e,null,"length",[e,t])}function ut(t){for(var s,r=t.oClasses,i=t.sTableId,o=t.aLengthMenu,c=Array.isArray(o[0]),l=c?o[0]:o,a=c?o[1]:o,d=e("<select/>",{name:i+"_length","aria-controls":i,class:r.sLengthSelect}),n=0,u=l.length;n<u;n++)d[0][n]=new Option("number"==typeof a[n]?t.fnFormatNumber(a[n]):a[n],l[n]);return s=e("<div><label/></div>").addClass(r.sLength),t.aanFeatures.l||(s[0].id=i+"_length"),s.children().append(t.oLanguage.sLengthMenu.replace("_MENU_",d[0].outerHTML)),e("select",s).val(t._iDisplayLength).on("change.DT",function(){Ne(t,e(this).val()),x(t)}),e(t.nTable).on("length.dt.DT",function(n,o,i){t===o&&e("select",s).val(i)}),s[0]}function qe(t){function a(e){x(e)}var n=t.sPaginationType,s=o.ext.pager[n],r="function"==typeof s,n=e("<div/>").addClass(t.oClasses.sPaging+n)[0],i=t.aanFeatures;return r||s.fnInit(t,n,a),i.p||(n.id=t.sTableId+"_paginate",t.aoDrawCallback.push({fn:function(e){if(r)for(var d=e._iDisplayStart,n=e._iDisplayLength,u=e.fnRecordsDisplay(),o=-1===n,c=o?0:Math.ceil(d/n),l=o?1:Math.ceil(u/n),h=s(c,l),t=0,m=i.p.length;t<m;t++)Te(e,"pageButton")(e,i.p[t],t,h,c,l);else s.fnUpdate(e,a)},sName:"pagination"})),n}function G(e,t,n){var s=e._iDisplayStart,o=e._iDisplayLength,i=e.fnRecordsDisplay(),i=(0===i||-1===o?s=0:"number"==typeof t?i<(s=t*o)&&(s=0):"first"==t?s=0:"previous"==t?(s=0<=o?s-o:0)<0&&(s=0):"next"==t?s+o<i&&(s+=o):"last"==t?s=Math.floor((i-1)/o)*o:b(e,0,"Unknown paging action: "+t,5),e._iDisplayStart!==s);return e._iDisplayStart=s,i?(r(e,null,"page",[e]),n&&x(e)):r(e,null,"page-nc",[e]),i}function ot(t){return e("<div/>",{id:t.aanFeatures.r?null:t.sTableId+"_processing",class:t.oClasses.sProcessing}).html(t.oLanguage.sProcessing).append("<div><div></div><div></div><div></div><div></div></div>").insertBefore(t.nTable)[0]}function g(t,n){t.oFeatures.bProcessing&&e(t.aanFeatures.r).css("display",n?"block":"none"),r(t,null,"processing",[t,n])}function nt(t){var n,s,o,i,c,d,u,h,m,f,p,g,a=e(t.nTable),r=t.oScroll;return""===r.sX&&""===r.sY?t.nTable:(i=r.sX,p=r.sY,o=t.oClasses,f=(u=a.children("caption")).length?u[0]._captionSide:null,c=e(a[0].cloneNode(!1)),g=e(a[0].cloneNode(!1)),s=function(e){return e?l(e):null},(d=a.children("tfoot")).length||(d=null),c=e(n="<div/>",{class:o.sScrollWrapper}).append(e(n,{class:o.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:i?s(i):"100%"}).append(e(n,{class:o.sScrollHeadInner}).css({"box-sizing":"content-box",width:r.sXInner||"100%"}).append(c.removeAttr("id").css("margin-left",0).append("top"===f?u:null).append(a.children("thead"))))).append(e(n,{class:o.sScrollBody}).css({position:"relative",overflow:"auto",width:s(i)}).append(a)),d&&c.append(e(n,{class:o.sScrollFoot}).css({overflow:"hidden",border:0,width:i?s(i):"100%"}).append(e(n,{class:o.sScrollFootInner}).append(g.removeAttr("id").css("margin-left",0).append("bottom"===f?u:null).append(a.children("tfoot"))))),s=c.children(),h=s[0],n=s[1],m=d?s[2]:null,i&&e(n).on("scroll.DT",function(){var t=this.scrollLeft;h.scrollLeft=t,d&&(m.scrollLeft=t)}),e(n).css("max-height",p),r.bCollapse||e(n).css("height",p),t.nScrollHead=h,t.nScrollBody=n,t.nScrollFoot=m,t.aoDrawCallback.push({fn:se,sName:"scrolling"}),c[0])}function se(n){function S(e){(e=e.style).paddingTop="0",e.paddingBottom="0",e.borderTopWidth="0",e.borderBottomWidth="0",e.height=0}var h,m,f,g,N,a=n.oScroll,w=a.sX,O=a.sXInner,L=a.sY,a=a.iBarWidth,c=e(n.nScrollHead),H=c[0].style,_=c.children("div"),F=_[0].style,_=_.children("table"),r=n.nScrollBody,p=e(r),x=r.style,C=e(n.nScrollFoot).children("div"),I=C.children("table"),u=e(n.nTHead),i=e(n.nTable),M=i[0],j=M.style,d=n.nTFoot?e(n.nTFoot):null,T=n.oBrowser,A=T.bScrollOversize,k=(v(n.aoColumns,"nTh"),[]),E=[],z=[],D=[],o=r.scrollHeight>r.clientHeight;n.scrollBarVis!==o&&n.scrollBarVis!==s?(n.scrollBarVis=o,R(n)):(n.scrollBarVis=o,i.children("thead, tfoot").remove(),d&&(o=d.clone().prependTo(i),g=d.find("tr"),h=o.find("tr"),o.find("[id]").removeAttr("id")),o=u.clone().prependTo(i),u=u.find("tr"),f=o.find("tr"),o.find("th, td").removeAttr("tabindex"),o.find("[id]").removeAttr("id"),w||(x.width="100%",c[0].style.width="100%"),e.each(he(n,o),function(e,t){N=P(n,e),t.style.width=n.aoColumns[N].sWidth}),d&&y(function(e){e.style.width=""},h),c=i.outerWidth(),""===w?(j.width="100%",A&&(i.find("tbody").height()>r.offsetHeight||"scroll"==p.css("overflow-y"))&&(j.width=l(i.outerWidth()-a)),c=i.outerWidth()):""!==O&&(j.width=l(O),c=i.outerWidth()),y(S,f),y(function(n){var s=t.getComputedStyle?t.getComputedStyle(n).width:l(e(n).width());z.push(n.innerHTML),k.push(s)},f),y(function(e,t){e.style.width=k[t]},u),e(f).css("height",0),d&&(y(S,h),y(function(t){D.push(t.innerHTML),E.push(l(e(t).css("width")))},h),y(function(e,t){e.style.width=E[t]},g),e(h).height(0)),y(function(e,t){e.innerHTML='<div class="dataTables_sizing">'+z[t]+"</div>",e.childNodes[0].style.height="0",e.childNodes[0].style.overflow="hidden",e.style.width=k[t]},f),d&&y(function(e,t){e.innerHTML='<div class="dataTables_sizing">'+D[t]+"</div>",e.childNodes[0].style.height="0",e.childNodes[0].style.overflow="hidden",e.style.width=E[t]},h),Math.round(i.outerWidth())<Math.round(c)?(m=r.scrollHeight>r.offsetHeight||"scroll"==p.css("overflow-y")?c+a:c,A&&(r.scrollHeight>r.offsetHeight||"scroll"==p.css("overflow-y"))&&(j.width=l(m-a)),""!==w&&""===O||b(n,1,"Possible column misalignment",6)):m="100%",x.width=l(m),H.width=l(m),d&&(n.nScrollFoot.style.width=l(m)),L||A&&(x.height=l(M.offsetHeight+a)),o=i.outerWidth(),_[0].style.width=l(o),F.width=l(o),u=i.height()>r.clientHeight||"scroll"==p.css("overflow-y"),F[g="padding"+(T.bScrollbarLeft?"Left":"Right")]=u?a+"px":"0px",d&&(I[0].style.width=l(o),C[0].style.width=l(o),C[0].style[g]=u?a+"px":"0px"),i.children("colgroup").insertBefore(i.children("thead")),p.trigger("scroll"),!n.bSorted&&!n.bFiltered||n._drawHold||(r.scrollTop=0))}function y(e,t,n){for(var s,o,a=0,i=0,r=t.length;i<r;){for(s=t[i].firstChild,o=n?n[i].firstChild:null;s;)1===s.nodeType&&(n?e(s,o,a):e(s,a),a++),s=s.nextSibling,o=n?o.nextSibling:null;i++}}tt=/<.*?>/g;function Ue(n){var i,u,b,_,O,C,h=n.nTable,m=n.aoColumns,a=n.oScroll,v=a.sY,f=a.sX,a=a.sXInner,g=m.length,r=pe(n,"bVisible"),d=e("th",n.nTHead),c=h.getAttribute("width"),p=h.parentNode,x=!1,y=n.oBrowser,j=y.bScrollOversize,o=h.style.width;for(o&&-1!==o.indexOf("%")&&(c=o),s=0;s<r.length;s++)null!==(i=m[r[s]]).sWidth&&(i.sWidth=et(i.sWidthOrig,p),x=!0);if(j||!x&&!f&&!v&&g==F(n)&&g==d.length)for(s=0;s<g;s++)b=P(n,s),null!==b&&(m[b].sWidth=l(d.eq(s).width()));else{o=e(h).clone().css("visibility","hidden").removeAttr("id"),_=(o.find("tbody tr").remove(),e("<tr/>").appendTo(o.find("tbody")));for(o.find("thead, tfoot").remove(),o.append(e(n.nTHead).clone()).append(e(n.nTFoot).clone()),o.find("tfoot th, tfoot td").css("width",""),d=he(n,o.find("thead")[0]),s=0;s<r.length;s++)i=m[r[s]],d[s].style.width=null!==i.sWidthOrig&&""!==i.sWidthOrig?l(i.sWidthOrig):"",i.sWidthOrig&&f&&e(d[s]).append(e("<div/>").css({width:i.sWidthOrig,margin:0,padding:0,border:0,height:1}));if(n.aoData.length)for(s=0;s<r.length;s++)i=m[O=r[s]],e(yt(n,O)).clone(!1).append(i.sContentPadding).appendTo(_);e("[name]",o).removeAttr("name");for(var E=e("<div/>").css(f||v?{position:"absolute",top:0,left:0,height:1,right:0,overflow:"hidden"}:{}).append(o).appendTo(p),w=(f&&a?o.width(a):f?(o.css("width","auto"),o.removeAttr("width"),o.width()<p.clientWidth&&c&&o.width(p.clientWidth)):v?o.width(p.clientWidth):c&&o.width(c),0),s=0;s<r.length;s++)u=e(d[s]),C=u.outerWidth()-u.width(),u=y.bBounding?Math.ceil(d[s].getBoundingClientRect().width):u.outerWidth(),w+=u,m[r[s]].sWidth=l(u-C);h.style.width=l(w),E.remove()}c&&(h.style.width=l(c)),!c&&!f||n._reszEvt||(a=function(){e(t).on("resize.DT-"+n.sInstance,ae(function(){R(n)}))},j?setTimeout(a,1e3):a(),n._reszEvt=!0)}ae=o.util.throttle;function et(t,s){return t?(s=(t=e("<div/>").css("width",l(t)).appendTo(s||n.body))[0].offsetWidth,t.remove(),s):0}function yt(t,n){var o,s=Ge(t,n);return s<0?null:(o=t.aoData[s]).nTr?o.anCells[n]:e("<td/>").html(p(t,s,n,"display"))[0]}function Ge(e,t){for(var n,o=-1,i=-1,s=0,a=e.aoData.length;s<a;s++)(n=(n=(n=p(e,s,t,"display")+"").replace(tt,"")).replace(/&nbsp;/g," ")).length>o&&(o=n.length,i=s);return i}function l(e){return null===e?"0px":"number"==typeof e?e<0?"0px":e+"px":e.match(/\d$/)?e+"px":e}function D(t){function r(t){t.length&&!Array.isArray(t[0])?i.push(t):e.merge(i,t)}var n,c,d,u,h,f,g,m=[],l=t.aoColumns,a=t.aaSortingFixed,p=e.isPlainObject(a),i=[];for(Array.isArray(a)&&r(a),p&&a.pre&&r(a.pre),r(t.aaSorting),p&&a.post&&r(a.post),n=0;n<i.length;n++)for(g=(f=l[h=i[n][c=0]].aDataSort).length;c<g;c++)d=l[u=f[c]].sType||"string",i[n]._idx===s&&(i[n]._idx=e.inArray(i[n][1],l[u].asSorting)),m.push({src:h,col:u,dir:i[n][1],index:i[n]._idx,type:d,formatter:o.ext.type.order[d+"-pre"]});return m}function Ze(e){var t,n,r,c,l,s=[],d=o.ext.type.order,i=e.aoData,u=(e.aoColumns,0),a=e.aiDisplayMaster;for(Be(e),t=0,r=(n=D(e)).length;t<r;t++)(l=n[t]).formatter&&u++,st(e,l.col);if("ssp"!=h(e)&&0!==n.length){for(t=0,c=a.length;t<c;t++)s[a[t]]=t;u===n.length?a.sort(function(e,t){for(var o,a,r,c,d=n.length,u=i[e]._aSortData,h=i[t]._aSortData,l=0;l<d;l++)if(0!=(r=(o=u[(c=n[l]).col])<(a=h[c.col])?-1:a<o?1:0))return"asc"===c.dir?r:-r;return(o=s[e])<(a=s[t])?-1:a<o?1:0}):a.sort(function(e,t){for(var o,a,r,l=n.length,u=i[e]._aSortData,h=i[t]._aSortData,c=0;c<l;c++)if(a=u[(o=n[c]).col],r=h[o.col],0!==(o=(d[o.type+"-"+o.dir]||d["string-"+o.dir])(a,r)))return o;return(a=s[e])<(r=s[t])?-1:r<a?1:0})}e.bSorted=!0}function Je(e){for(var i=e.aoColumns,n=D(e),a=e.oLanguage.oAria,s=0,l=i.length;s<l;s++){var t=i[s],r=t.asSorting,c=t.ariaTitle||t.sTitle.replace(/<.*?>/g,""),o=t.nTh;o.removeAttribute("aria-sort"),t=t.bSortable?c+("asc"===(0<n.length&&n[0].col==s&&(o.setAttribute("aria-sort","asc"==n[0].dir?"ascending":"descending"),r[n[0].index+1])||r[0])?a.sSortAscending:a.sSortDescending):c,o.setAttribute("aria-label",t)}}function ve(t,n,o,i){function d(t,n){var o=t._idx;return(o=o===s?e.inArray(t[1],l):o)+1<l.length?o+1:n?null:0}var r,c=t.aoColumns[n],a=t.aaSorting,l=c.asSorting;"number"==typeof a[0]&&(a=t.aaSorting=[a]),o&&t.oFeatures.bSortMulti?-1!==(c=e.inArray(n,v(a,"0")))?null===(r=null===(r=d(a[c],!0))&&1===a.length?0:r)?a.splice(c,1):(a[c][1]=l[r],a[c]._idx=r):(a.push([n,l[0],0]),a[a.length-1]._idx=0):a.length&&a[0][0]==n?(r=d(a[0]),a.length=1,a[0][1]=l[r],a[0]._idx=r):(a.length=0,a.push([n,l[0]]),a[0]._idx=0),E(t),"function"==typeof i&&i(t)}function We(e,t,n,s){var o=e.aoColumns[n];Le(t,{},function(t){!1!==o.bSortable&&(e.oFeatures.bProcessing?(g(e,!0),setTimeout(function(){ve(e,n,t.shiftKey,s),"ssp"!==h(e)&&g(e,!1)},0)):ve(e,n,t.shiftKey,s))})}function ue(t){var n,s,o,a=t.aLastSort,r=t.oClasses.sSortColumn,i=D(t),c=t.oFeatures;if(c.bSort&&c.bSortClasses){for(n=0,s=a.length;n<s;n++)o=a[n].src,e(v(t.aoData,"anCells",o)).removeClass(r+(n<2?n+1:3));for(n=0,s=i.length;n<s;n++)o=i[n].src,e(v(t.aoData,"anCells",o)).addClass(r+(n<2?n+1:3))}t.aLastSort=i}function st(e,t){for(var s,a,r,c=e.aoColumns[t],i=o.ext.order[c.sSortDataType],l=(i&&(r=i.call(e.oInstance,e,t,H(e,t))),o.ext.type.order[c.sType+"-pre"]),n=0,d=e.aoData.length;n<d;n++)(s=e.aoData[n])._aSortData||(s._aSortData=[]),s._aSortData[t]&&!i||(a=i?r[n]:p(e,n,t,"sort"),s._aSortData[t]=l?l(a):a)}function I(t){var n;t._bLoadingState||(n={time:+new Date,start:t._iDisplayStart,length:t._iDisplayLength,order:e.extend(!0,[],t.aaSorting),search:At(t.oPreviousSearch),columns:e.map(t.aoColumns,function(e,n){return{visible:e.bVisible,search:At(t.aoPreSearchCols[n])}})},t.oSavedState=n,r(t,"aoStateSaveParams","stateSaveParams",[t,n]),t.oFeatures.bStateSave&&!t.bDestroying&&t.fnStateSaveCallback.call(t.oInstance,t,n))}function it(e,t,n){var o;if(e.oFeatures.bStateSave)return(o=e.fnStateLoadCallback.call(e.oInstance,e,function(t){Re(e,t,n)}))!==s&&Re(e,o,n),!0;n()}function Re(t,n,i){var a,l,d,h,u=t.aoColumns,c=(t._bLoadingState=!0,t._bInitComplete?new o.Api(t):null);if(n&&n.time)if(d=r(t,"aoStateLoadParams","stateLoadParams",[t,n]),-1!==e.inArray(!1,d))t._bLoadingState=!1;else if(d=t.iStateDuration,0<d&&n.time<+new Date-1e3*d)t._bLoadingState=!1;else if(n.columns&&u.length!==n.columns.length)t._bLoadingState=!1;else{if(t.oLoadedState=e.extend(!0,{},n),n.length!==s&&(c?c.page.len(n.length):t._iDisplayLength=n.length),n.start!==s&&(null===c?(t._iDisplayStart=n.start,t.iInitDisplayStart=n.start):G(t,n.start/t._iDisplayLength)),n.order!==s&&(t.aaSorting=[],e.each(n.order,function(e,n){t.aaSorting.push(n[0]>=u.length?[0,n[1]]:n)})),n.search!==s&&e.extend(t.oPreviousSearch,_t(n.search)),n.columns){for(a=0,h=n.columns.length;a<h;a++)l=n.columns[a],l.visible!==s&&(c?c.column(a).visible(l.visible,!1):u[a].bVisible=l.visible),l.search!==s&&e.extend(t.aoPreSearchCols[a],_t(l.search));c&&c.columns.adjust()}t._bLoadingState=!1,r(t,"aoStateLoaded","stateLoaded",[t,n])}else t._bLoadingState=!1;i()}function de(t){var n=o.settings,t=e.inArray(t,v(n,"nTable"));return-1!==t?n[t]:null}function b(e,n,s,i){if(s="DataTables warning: "+(e?"table id="+e.sTableId+" - ":"")+s,i&&(s+=". For more information about this error, please see http://datatables.net/tn/"+i),n)t.console&&console.log&&console.log(s);else if(n=o.ext,n=n.sErrMode||n.errMode,e&&r(e,null,"error",[e,i,s]),"alert"==n)alert(s);else{if("throw"==n)throw new Error(s);"function"==typeof n&&n(e,i,s)}}function j(t,n,o,i){Array.isArray(o)?e.each(o,function(e,s){Array.isArray(s)?j(t,n,s[0],s[1]):j(t,n,s)}):(i===s&&(i=o),n[o]!==s&&(t[i]=n[o]))}function ge(t,n,s){var o,i;for(o in n)n.hasOwnProperty(o)&&(i=n[o],e.isPlainObject(i)?(e.isPlainObject(t[o])||(t[o]={}),e.extend(!0,t[o],i)):s&&"data"!==o&&"aaData"!==o&&Array.isArray(i)?t[o]=i.slice():t[o]=i);return t}function Le(t,n,s){e(t).on("click.DT",n,function(n){e(t).trigger("blur"),s(n)}).on("keypress.DT",n,function(e){13===e.which&&(e.preventDefault(),s(e))}).on("selectstart.DT",function(){return!1})}function m(e,t,n,s){n&&e[t].push({fn:n,sName:s})}function r(t,n,s,o){var i=[];return n&&(i=e.map(t[n].slice().reverse(),function(e){return e.fn.apply(t.oInstance,o)})),null!==s&&(n=e.Event(s+".dt"),e(t.nTable).trigger(n,o),i.push(n.result)),i}function ze(e){var t=e._iDisplayStart,s=e.fnDisplayEnd(),n=e._iDisplayLength;s<=t&&(t=s-n),t-=t%n,e._iDisplayStart=t=-1===n||t<0?0:t}function Te(t,n){var t=t.renderer,s=o.ext.renderer[n];return e.isPlainObject(t)&&t[n]?s[t[n]]||s._:"string"==typeof t&&s[t]||s._}function h(e){return e.oFeatures.bServerSide?"ssp":e.ajax||e.sAjaxSource?"ajax":"dom"}function vt(t,n){var s;return Array.isArray(t)?e.map(t,function(e){return vt(e,n)}):"number"==typeof t?[n[t]]:(s=e.map(n,function(e){return e.nTable}),e(s).filter(t).map(function(){var o=e.inArray(this,s);return n[o]}).toArray())}function bt(e,t,n){var s,o;n&&(o=new a(e)).one("draw",function(){n(o.ajax.json())}),"ssp"==h(e)?E(e,t):(g(e,!0),(s=e.jqXHR)&&4!==s.readyState&&s.abort(),me(e,[],function(n){ee(e);for(var o=Y(e,n),s=0,i=o.length;s<i;s++)C(e,o[s]);E(e,t),g(e,!1)}))}function Fe(e,t,n,o,i){for(var r,l,u,h,f,c=[],p=typeof t,a=0,m=(t=t&&"string"!=p&&"function"!=p&&t.length!==s?t:[t]).length;a<m;a++)for(r=0,f=(l=t[a]&&t[a].split&&!t[a].match(/[[(:]/)?t[a].split(","):[t[a]]).length;r<f;r++)(h=n("string"==typeof l[r]?l[r].trim():l[r]))&&h.length&&(c=c.concat(h));if(u=d.selector[e],u.length)for(a=0,m=u.length;a<m;a++)c=u[a](o,i,c);return Z(c)}function Me(t){return(t=t||{}).filter&&t.search===s&&(t.search=t.filter),e.extend({search:"none",order:"current",page:"all"},t)}function Se(e){for(var t=0,n=e.length;t<n;t++)if(0<e[t].length)return e[0]=e[t],e[0].length=1,e.length=1,e.context=[e.context[t]],e;return e.length=0,e}function qt(t,n,s,o){function a(n,s){if(Array.isArray(n)||n instanceof e)for(var o,r=0,c=n.length;r<c;r++)a(n[r],s);else n.nodeName&&"tr"===n.nodeName.toLowerCase()?i.push(n):(o=e("<tr><td></td></tr>").addClass(s),e("td",o).addClass(s).html(n)[0].colSpan=F(t),i.push(o[0]))}var i=[];a(s,o),n._details&&n._details.detach(),n._details=e(i),n._detailsShow&&n._details.insertAfter(n.nTr)}function Ot(t,n){if(o=t.context,o.length&&t.length&&(s=o[0].aoData[t[0]],s._details)){(s._detailsShow=n)?(s._details.insertAfter(s.nTr),e(s.nTr).addClass("dt-hasChild")):(s._details.detach(),e(s.nTr).removeClass("dt-hasChild")),r(o[0],null,"childRow",[n,t.row(t[0])]);var o,l=o[0],i=new a(l),s=".dt.DT_details",n="draw"+s,t="column-sizing"+s,s="destroy"+s,c=l.aoData;(i.off(n+" "+t+" "+s),v(c,"_details").length>0)&&(i.on(n,function(e,t){if(l!==t)return;i.rows({page:"current"}).eq(0).each(function(e){var t=c[e];t._detailsShow&&t._details.insertAfter(t.nTr)})}),i.on(t,function(e,t){if(l!==t)return;for(var i,a=F(t),o=0,r=c.length;o<r;o++)i=c[o],i._details&&i._details.children("td[colspan]").attr("colspan",a)}),i.on(s,function(e,t){if(l!==t)return;for(var n=0,s=c.length;n<s;n++)c[n]._details&&ke(i,n)})),St(o)}}function xt(e,t,n,s,o){for(var a=[],i=0,r=o.length;i<r;i++)a.push(p(e,o[i],t));return a}var Ct=[],u=Array.prototype,a=function(t,n){if(!(this instanceof a))return new a(t,n);function r(t){var n,i,a,r;t=t,a=o.settings,r=e.map(a,function(e){return e.nTable}),(t=t?t.nTable&&t.oApi?[t]:t.nodeName&&"table"===t.nodeName.toLowerCase()?-1!==(n=e.inArray(t,r))?[a[n]]:null:t&&"function"==typeof t.settings?t.settings().toArray():("string"==typeof t?i=e(t):t instanceof e&&(i=t),i?i.map(function(){return-1!==(n=e.inArray(this,r))?a[n]:null}).toArray():void 0):[])&&s.push.apply(s,t)}if(s=[],Array.isArray(t))for(var s,i=0,c=t.length;i<c;i++)r(t[i]);else r(t);this.context=Z(s),n&&e.merge(this,n),this.selector={rows:null,cols:null,opts:null},a.extend(this,this,Ct)},ne=(o.Api=a,e.extend(a.prototype,{any:function(){return 0!==this.count()},concat:u.concat,context:[],count:function(){return this.flatten().length},each:function(e){for(var t=0,n=this.length;t<n;t++)e.call(this,this[t],t,this);return this},eq:function(e){var t=this.context;return t.length>e?new a(t[e],this[e]):null},filter:function(e){if(n=[],u.filter)n=u.filter.call(this,e,this);else for(var n,t=0,s=this.length;t<s;t++)e.call(this,this[t],t,this)&&n.push(this[t]);return new a(this.context,n)},flatten:function(){var e=[];return new a(this.context,e.concat.apply(e,this.toArray()))},join:u.join,indexOf:u.indexOf||function(e,t){for(var n=t||0,s=this.length;n<s;n++)if(this[n]===e)return n;return-1},iterator:function(e,t,n,o){var i,l,d,u,h,f,p,g,v,c=[],r=this.context,m=this.selector;for("string"==typeof e&&(o=n,n=t,t=e,e=!1),i=0,p=r.length;i<p;i++)if(u=new a(r[i]),"table"===t)(l=n.call(u,r[i],i))!==s&&c.push(l);else if("columns"===t||"rows"===t)(l=n.call(u,r[i],this[i],i))!==s&&c.push(l);else if("column"===t||"column-rows"===t||"row"===t||"cell"===t)for(f=this[i],"column-rows"===t&&(v=ne(r[i],m.opts)),d=0,g=f.length;d<g;d++)h=f[d],(l="cell"===t?n.call(u,r[i],h.row,h.column,i,d):n.call(u,r[i],h,i,d,v))!==s&&c.push(l);return c.length||o?((e=(o=new a(r,e?c.concat.apply([],c):c)).selector).rows=m.rows,e.cols=m.cols,e.opts=m.opts,o):this},lastIndexOf:u.lastIndexOf||function(){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(e){if(t=[],u.map)t=u.map.call(this,e,this);else for(var t,n=0,s=this.length;n<s;n++)t.push(e.call(this,this[n],n));return new a(this.context,t)},pluck:function(e){let t=o.util.get(e);return this.map(function(e){return t(e)})},pop:u.pop,push:u.push,reduce:u.reduce||function(e,t){return rt(this,e,t,0,this.length,1)},reduceRight:u.reduceRight||function(e,t){return rt(this,e,t,this.length-1,-1,-1)},reverse:u.reverse,selector:null,shift:u.shift,slice:function(){return new a(this.context,this)},sort:u.sort,splice:u.splice,toArray:function(){return u.slice.call(this)},to$:function(){return e(this)},toJQuery:function(){return e(this)},unique:function(){return new a(this.context,Z(this))},unshift:u.unshift}),a.extend=function(e,t,n){if(n.length&&t&&(t instanceof a||t.__dt_wrapper))for(var s,o=0,i=n.length;o<i;o++)t[(s=n[o]).name]="function"===s.type?function(e,t,n){return function(){var s=t.apply(e,arguments);return a.extend(s,s,n.methodExt),s}}(e,s.val,s):"object"===s.type?{}:s.val,t[s.name].__dt_wrapper=!0,a.extend(e,t[s.name],s.propExt)},a.register=i=function(t,n){if(Array.isArray(t))for(var s,d,u,r=0,h=t.length;r<h;r++)a.register(t[r],n);else for(var i=t.split("."),c=Ct,o=0,l=i.length;o<l;o++)s=function(e,t){for(var n=0,s=e.length;n<s;n++)if(e[n].name===t)return e[n];return null}(c,u=(d=-1!==i[o].indexOf("()"))?i[o].replace("()",""):i[o]),s||c.push(s={name:u,val:{},methodExt:[],propExt:[],type:"object"}),o===l-1?(s.val=n,s.type="function"==typeof n?"function":e.isPlainObject(n)?"object":"other"):c=d?s.methodExt:s.propExt},a.registerPlural=c=function(e,t,n){a.register(e,n),a.register(t,function(){var e=n.apply(this,arguments);return e===this?this:e instanceof a?e.length?Array.isArray(e[0])?new a(e.context,e[0]):e[0]:s:e})},i("tables()",function(e){return e!==s&&null!==e?new a(vt(e,this.context)):this}),i("table()",function(e){var e=this.tables(e),t=e.context;return t.length?new a(t[0]):e}),c("tables().nodes()","table().node()",function(){return this.iterator("table",function(e){return e.nTable},1)}),c("tables().body()","table().body()",function(){return this.iterator("table",function(e){return e.nTBody},1)}),c("tables().header()","table().header()",function(){return this.iterator("table",function(e){return e.nTHead},1)}),c("tables().footer()","table().footer()",function(){return this.iterator("table",function(e){return e.nTFoot},1)}),c("tables().containers()","table().container()",function(){return this.iterator("table",function(e){return e.nTableWrapper},1)}),i("draw()",function(e){return this.iterator("table",function(t){"page"===e?x(t):E(t,!1===(e="string"==typeof e?"full-hold"!==e:e))})}),i("page()",function(e){return e===s?this.page.info().page:this.iterator("table",function(t){G(t,e)})}),i("page.info()",function(){var t,n,o,i,a;return 0===this.context.length?s:(o=(t=this.context[0])._iDisplayStart,n=t.oFeatures.bPaginate?t._iDisplayLength:-1,i=t.fnRecordsDisplay(),{page:(a=-1===n)?0:Math.floor(o/n),pages:a?1:Math.ceil(i/n),start:o,end:t.fnDisplayEnd(),length:n,recordsTotal:t.fnRecordsTotal(),recordsDisplay:i,serverSide:"ssp"===h(t)})}),i("page.len()",function(e){return e===s?0!==this.context.length?this.context[0]._iDisplayLength:s:this.iterator("table",function(t){Ne(t,e)})}),i("ajax.json()",function(){var e=this.context;if(0<e.length)return e[0].json}),i("ajax.params()",function(){var e=this.context;if(0<e.length)return e[0].oAjaxData}),i("ajax.reload()",function(e,t){return this.iterator("table",function(n){bt(n,!1===t,e)})}),i("ajax.url()",function(t){var n=this.context;return t===s?0===n.length?s:(n=n[0]).ajax?e.isPlainObject(n.ajax)?n.ajax.url:n.ajax:n.sAjaxSource:this.iterator("table",function(n){e.isPlainObject(n.ajax)?n.ajax.url=t:n.ajax=t})}),i("ajax.url().load()",function(e,t){return this.iterator("table",function(n){bt(n,!1===t,e)})}),function(t,n){var d,i=[],a=t.aiDisplay,l=t.aiDisplayMaster,o=n.search,c=n.order,n=n.page;if("ssp"==h(t))return"removed"===o?[]:T(0,l.length);if("current"==n)for(s=t._iDisplayStart,r=t.fnDisplayEnd();s<r;s++)i.push(a[s]);else if("current"==c||"applied"==c){if("none"==o)i=l.slice();else if("applied"==o)i=a.slice();else if("removed"==o){for(var u={},s=0,r=a.length;s<r;s++)u[a[s]]=null;i=e.map(l,function(e){return u.hasOwnProperty(e)?null:e})}}else if("index"==c||"original"==c)for(s=0,r=t.aoData.length;s<r;s++)("none"==o||-1===(d=e.inArray(s,a))&&"removed"==o||0<=d&&"applied"==o)&&i.push(s);return i}),St=(i("rows()",function(t,n){t===s?t="":e.isPlainObject(t)&&(n=t,t=""),n=Me(n);var o=this.iterator("table",function(o){return Fe("row",t,function(t){var o,n=dt(t),c=a.aoData;return null!==n&&!r?[n]:(i=i||ne(a,r),null!==n&&-1!==e.inArray(n,i)?[n]:null===t||t===s||""===t?i:"function"==typeof t?e.map(i,function(e){var n=c[e];return t(e,n._aData,n.nTr)?e:null}):t.nodeName?(n=t._DT_RowIndex,o=t._DT_CellIndex,n!==s?c[n]&&c[n].nTr===t?[n]:[]:o?c[o.row]&&c[o.row].nTr===t.parentNode?[o.row]:[]:(n=e(t).closest("*[data-dt-row]")).length?[n.data("dt-row")]:[]):"string"==typeof t&&"#"===t.charAt(0)&&(o=a.aIds[t.replace(/^#/,"")],o!==s)?[o.idx]:(n=Bt(U(a.aoData,i,"nTr")),e(n).filter(t).map(function(){return this._DT_RowIndex}).toArray()))},a=o,r=n);var i,a,r},1);return o.selector.rows=t,o.selector.opts=n,o}),i("rows().nodes()",function(){return this.iterator("row",function(e,t){return e.aoData[t].nTr||s},1)}),i("rows().data()",function(){return this.iterator(!0,"rows",function(e,t){return U(e.aoData,t,"_aData")},1)}),c("rows().cache()","row().cache()",function(e){return this.iterator("row",function(t,n){return t=t.aoData[n],"search"===e?t._aFilterData:t._aSortData},1)}),c("rows().invalidate()","row().invalidate()",function(e){return this.iterator("row",function(t,n){q(t,n,e)})}),c("rows().indexes()","row().index()",function(){return this.iterator("row",function(e,t){return t},1)}),c("rows().ids()","row().id()",function(e){for(var s,i,r,o=[],n=this.context,t=0,c=n.length;t<c;t++)for(s=0,i=this[t].length;s<i;s++)r=n[t].rowIdFn(n[t].aoData[this[t][s]]._aData),o.push((!0===e?"#":"")+r);return new a(n,o)}),c("rows().remove()","row().remove()",function(){var e=this;return this.iterator("row",function(t,n,o){var i,a,r,l,d,u,c=t.aoData,h=c[n];for(c.splice(n,1),i=0,d=c.length;i<d;i++)if(r=(l=c[i]).anCells,null!==l.nTr&&(l.nTr._DT_RowIndex=i),null!==r)for(a=0,u=r.length;a<u;a++)r[a]._DT_CellIndex.row=i;te(t.aiDisplayMaster,n),te(t.aiDisplay,n),te(e[o],n,!1),0<t._iRecordsDisplay&&t._iRecordsDisplay--,ze(t),o=t.rowIdFn(h._aData),o!==s&&delete t.aIds[o]}),this.iterator("table",function(e){for(var t=0,n=e.aoData.length;t<n;t++)e.aoData[t].idx=t}),this}),i("rows.add()",function(t){var s=this.iterator("table",function(e){for(var n,s=[],o=0,i=t.length;o<i;o++)(n=t[o]).nodeName&&"TR"===n.nodeName.toUpperCase()?s.push(le(e,n)[0]):s.push(C(e,n));return s},1),n=this.rows(-1);return n.pop(),e.merge(n,s),n}),i("row()",function(e,t){return Se(this.rows(e,t))}),i("row().data()",function(e){var n,t=this.context;return e===s?t.length&&this.length?t[0].aoData[this[0]]._aData:s:((n=t[0].aoData[this[0]])._aData=e,Array.isArray(e)&&n.nTr&&n.nTr.id&&O(t[0].rowId)(e,n.nTr.id),q(t[0],this[0],"data"),this)}),i("row().node()",function(){var e=this.context;return e.length&&this.length&&e[0].aoData[this[0]].nTr||null}),i("row.add()",function(t){t instanceof e&&t.length&&(t=t[0]);var n=this.iterator("table",function(e){return t.nodeName&&"TR"===t.nodeName.toUpperCase()?le(e,t)[0]:C(e,t)});return this.row(n[0])}),e(n).on("plugin-init.dt",function(t,n){var o=new a(n),s="on-plugin-init";const i="stateSaveParams."+s,c="destroy."+s;o.on(i,function(e,t,n){for(var a=t.rowIdFn,o=t.aoData,i=[],s=0;s<o.length;s++)o[s]._detailsShow&&i.push("#"+a(o[s]._aData));n.childRows=i}),o.on(c,function(){o.off(i+" "+c)}),s=o.state.loaded(),s&&s.childRows&&o.rows(e.map(s.childRows,function(e){return e.replace(/:/g,"\\:")})).every(function(){r(n,null,"requestChild",[this])})}),o.util.throttle(function(e){I(e[0])},500)),ke=function(t,n){var o=t.context;o.length&&(n=o[0].aoData[n!==s?n:t[0]])&&n._details&&(n._details.remove(),n._detailsShow=s,n._details=s,e(n.nTr).removeClass("dt-hasChild"),St(o))},N="row().child",Q=N+"()",$t=(i(Q,function(e,t){var n=this.context;return e===s?n.length&&this.length?n[0].aoData[this[0]]._details:s:(!0===e?this.child.show():!1===e?ke(this):n.length&&this.length&&qt(n[0],n[0].aoData[this[0]],e,t),this)}),i([N+".show()",Q+".show()"],function(){return Ot(this,!0),this}),i([N+".hide()",Q+".hide()"],function(){return Ot(this,!1),this}),i([N+".remove()",Q+".remove()"],function(){return ke(this),this}),i(N+".isShown()",function(){var e=this.context;return e.length&&this.length&&e[0].aoData[this[0]]._detailsShow||!1}),/^([^:]+):(name|visIdx|visible)$/),Dt=(i("columns()",function(t,n){t===s?t="":e.isPlainObject(t)&&(n=t,t=""),n=Me(n);var o=this.iterator("table",function(s){return c=t,r=n,o=(i=s).aoColumns,l=v(o,"sName"),a=v(o,"nTh"),Fe("column",c,function(t){var s,c,d,u,n=dt(t);if(""===t)return T(o.length);if(null!==n)return[0<=n?n:o.length+n];if("function"==typeof t)return d=ne(i,r),e.map(o,function(e,n){return t(n,xt(i,n,0,0,d),a[n])?n:null});if(s="string"==typeof t?t.match($t):"",s)switch(s[2]){case"visIdx":case"visible":return c=parseInt(s[1],10),c<0?[(u=e.map(o,function(e,t){return e.bVisible?t:null}))[u.length+c]]:[P(i,c)];case"name":return e.map(l,function(e,t){return e===s[1]?t:null});default:return[]}return t.nodeName&&t._DT_CellIndex?[t._DT_CellIndex.column]:(n=e(a).filter(t).map(function(){return e.inArray(this,a)}).toArray()).length||!t.nodeName?n:(n=e(t).closest("*[data-dt-column]")).length?[n.data("dt-column")]:[]},i,r);var o,i,a,r,c,l},1);return o.selector.cols=t,o.selector.opts=n,o}),c("columns().header()","column().header()",function(){return this.iterator("column",function(e,t){return e.aoColumns[t].nTh},1)}),c("columns().footer()","column().footer()",function(){return this.iterator("column",function(e,t){return e.aoColumns[t].nTf},1)}),c("columns().data()","column().data()",function(){return this.iterator("column-rows",xt,1)}),c("columns().dataSrc()","column().dataSrc()",function(){return this.iterator("column",function(e,t){return e.aoColumns[t].mData},1)}),c("columns().cache()","column().cache()",function(e){return this.iterator("column-rows",function(t,n,s,o,i){return U(t.aoData,i,"search"===e?"_aFilterData":"_aSortData",n)},1)}),c("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(e,t,n,s,o){return U(e.aoData,o,"anCells",t)},1)}),c("columns().visible()","column().visible()",function(t,n){var o=this,i=this.iterator("column",function(n,o){if(t===s)return n.aoColumns[o].bVisible;var r,c,i=o,o=t,u=n.aoColumns,l=u[i],d=n.aoData;if(o===s)l.bVisible;else if(l.bVisible!==o){if(o)for(var h=e.inArray(!0,v(u,"bVisible"),i+1),a=0,m=d.length;a<m;a++)c=d[a].nTr,r=d[a].anCells,c&&c.insertBefore(r[i],r[h]||null);else e(v(n.aoData,"anCells",i)).detach();l.bVisible=o}});return t!==s&&this.iterator("table",function(i){K(i,i.aoHeader),K(i,i.aoFooter),i.aiDisplay.length||e(i.nTBody).find("td[colspan]").attr("colspan",F(i)),I(i),o.iterator("column",function(e,s){r(e,null,"column-visibility",[e,s,t,n])}),n!==s&&!n||o.columns.adjust()}),i}),c("columns().indexes()","column().index()",function(e){return this.iterator("column",function(t,n){return"visible"===e?H(t,n):n},1)}),i("columns.adjust()",function(){return this.iterator("table",function(e){R(e)},1)}),i("column.index()",function(e,t){var n;if(0!==this.context.length)return n=this.context[0],"fromVisible"===e||"toData"===e?P(n,t):"fromData"===e||"toVisible"===e?H(n,t):void 0}),i("column()",function(e,t){return Se(this.columns(e,t))}),i("cells()",function(t,n,o){var i,a,r,c,l,d,u;return e.isPlainObject(t)&&(t.row===s?(o=t,t=null):(o=n,n=null)),e.isPlainObject(n)&&(o=n,n=null),null===n||n===s?this.iterator("table",function(n){return a=n,n=t,f=Me(o),m=a.aoData,c=ne(a,f),v=Bt(U(m,c,"anCells")),b=e(gt([],v)),j=a.aoColumns.length,Fe("cell",n,function(t){var n,o="function"==typeof t;if(null===t||t===s||o){for(u=[],d=0,g=c.length;d<g;d++)for(l=c[d],i=0;i<j;i++)h={row:l,column:i},(!o||(r=m[l],t(h,p(a,l,i),r.anCells?r.anCells[i]:null)))&&u.push(h);return u}return e.isPlainObject(t)?t.column!==s&&t.row!==s&&-1!==e.inArray(t.row,c)?[t]:[]:(n=b.filter(t).map(function(e,t){return{row:t._DT_CellIndex.row,column:t._DT_CellIndex.column}}).toArray()).length||!t.nodeName?n:(r=e(t).closest("*[data-dt-row]")).length?[{row:r.data("dt-row"),column:r.data("dt-column")}]:[]},a,f);var i,a,r,c,l,d,u,h,m,f,g,v,b,j}):(i=o?{page:o.page,order:o.order,search:o.search}:{},c=this.columns(n,i),l=this.rows(t,i),i=this.iterator("table",function(e,t){var n=[];for(a=0,d=l[t].length;a<d;a++)for(r=0,u=c[t].length;r<u;r++)n.push({row:l[t][a],column:c[t][r]});return n},1),i=o&&o.selected?this.cells(i,o):i,e.extend(i.selector,{cols:n,rows:t,opts:o}),i)}),c("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(e,t,n){return e=e.aoData[t],e&&e.anCells?e.anCells[n]:s},1)}),i("cells().data()",function(){return this.iterator("cell",function(e,t,n){return p(e,t,n)},1)}),c("cells().cache()","cell().cache()",function(e){return e="search"===e?"_aFilterData":"_aSortData",this.iterator("cell",function(t,n,s){return t.aoData[n][e][s]},1)}),c("cells().render()","cell().render()",function(e){return this.iterator("cell",function(t,n,s){return p(t,n,s,e)},1)}),c("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(e,t,n){return{row:t,column:n,columnVisible:H(e,n)}},1)}),c("cells().invalidate()","cell().invalidate()",function(e){return this.iterator("cell",function(t,n,s){q(t,n,e,s)})}),i("cell()",function(e,t,n){return Se(this.cells(e,t,n))}),i("cell().data()",function(e){var n=this.context,t=this[0];return e===s?n.length&&t.length?p(n[0],t[0].row,t[0].column):s:(Xe(n[0],t[0].row,t[0].column,e),q(n[0],t[0].row,"data",t[0].column),this)}),i("order()",function(e,t){var n=this.context;return e===s?0!==n.length?n[0].aaSorting:s:("number"==typeof e?e=[[e,t]]:e.length&&!Array.isArray(e[0])&&(e=Array.prototype.slice.call(arguments)),this.iterator("table",function(t){t.aaSorting=e.slice()}))}),i("order.listener()",function(e,t,n){return this.iterator("table",function(s){We(s,e,t,n)})}),i("order.fixed()",function(t){var n;return t?this.iterator("table",function(n){n.aaSortingFixed=e.extend(!0,{},t)}):(n=(n=this.context).length?n[0].aaSortingFixed:s,Array.isArray(n)?{pre:n}:n)}),i(["columns().order()","column().order()"],function(t){var n=this;return this.iterator("table",function(s,o){var i=[];e.each(n[o],function(e,n){i.push([n,t])}),s.aaSorting=i})}),i("search()",function(t,n,o,i){var a=this.context;return t===s?0!==a.length?a[0].oPreviousSearch.sSearch:s:this.iterator("table",function(s){s.oFeatures.bFilter&&B(s,e.extend({},s.oPreviousSearch,{sSearch:t+"",bRegex:null!==n&&n,bSmart:null===o||o,bCaseInsensitive:null===i||i}),1)})}),c("columns().search()","column().search()",function(t,n,o,i){return this.iterator("column",function(a,r){var c=a.aoPreSearchCols;if(t===s)return c[r].sSearch;a.oFeatures.bFilter&&(e.extend(c[r],{sSearch:t+"",bRegex:null!==n&&n,bSmart:null===o||o,bCaseInsensitive:null===i||i}),B(a,a.oPreviousSearch,1))})}),i("state()",function(){return this.context.length?this.context[0].oSavedState:null}),i("state.clear()",function(){return this.iterator("table",function(e){e.fnStateSaveCallback.call(e.oInstance,e,{})})}),i("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),i("state.save()",function(){return this.iterator("table",function(e){I(e)})}),o.versionCheck=o.fnVersionCheck=function(e){for(var n,s,a=o.version.split("."),i=e.split("."),t=0,r=i.length;t<r;t++)if((n=parseInt(a[t],10)||0)!==(s=parseInt(i[t],10)||0))return s<n;return!0},o.isDataTable=o.fnIsDataTable=function(t){var n=e(t).get(0),s=!1;return t instanceof o.Api||(e.each(o.settings,function(t,o){var i=o.nScrollHead?e("table",o.nScrollHead)[0]:null,a=o.nScrollFoot?e("table",o.nScrollFoot)[0]:null;o.nTable!==n&&i!==n&&a!==n||(s=!0)}),s)},o.tables=o.fnTables=function(t){var n=!1,s=(e.isPlainObject(t)&&(n=t.api,t=t.visible),e.map(o.settings,function(n){if(!t||e(n.nTable).is(":visible"))return n.nTable}));return n?new a(s):s},o.camelToHungarian=w,i("$()",function(t,n){return n=this.rows(n).nodes(),n=e(n),e([].concat(n.filter(t).toArray(),n.find(t).toArray()))}),e.each(["on","one","off"],function(t,n){i(n+"()",function(){var t=Array.prototype.slice.call(arguments),s=(t[0]=e.map(t[0].split(/\s/),function(e){return e.match(/\.dt\b/)?e:e+".dt"}).join(" "),e(this.tables().nodes()));return s[n].apply(s,t),this})}),i("clear()",function(){return this.iterator("table",function(e){ee(e)})}),i("settings()",function(){return new a(this.context,this.context)}),i("init()",function(){var e=this.context;return e.length?e[0].oInit:null}),i("data()",function(){return this.iterator("table",function(e){return v(e.aoData,"_aData")}).flatten()}),i("destroy()",function(n){return n=n||!1,this.iterator("table",function(s){var f,d=s.oClasses,m=s.nTable,u=s.nTBody,i=s.nTHead,c=s.nTFoot,l=e(m),u=e(u),p=e(s.nTableWrapper),h=e.map(s.aoData,function(e){return e.nTr}),c=(s.bDestroying=!0,r(s,"aoDestroyCallback","destroy",[s]),n||new a(s).columns().visible(!0),p.off(".DT").find(":not(tbody *)").off(".DT"),e(t).off(".DT-"+s.sInstance),m!=i.parentNode&&(l.children("thead").detach(),l.append(i)),c&&m!=c.parentNode&&(l.children("tfoot").detach(),l.append(c)),s.aaSorting=[],s.aaSortingFixed=[],ue(s),e(h).removeClass(s.asStripeClasses.join(" ")),e("th, td",i).removeClass(d.sSortable+" "+d.sSortableAsc+" "+d.sSortableDesc+" "+d.sSortableNone),u.children().detach(),u.append(h),s.nTableWrapper.parentNode),i=n?"remove":"detach",h=(l[i](),p[i](),!n&&c&&(c.insertBefore(m,s.nTableReinsertBefore),l.css("width",s.sDestroyWidth).removeClass(d.sTable),f=s.asDestroyStripes.length)&&u.children().each(function(t){e(this).addClass(s.asDestroyStripes[t%f])}),e.inArray(s,o.settings));-1!==h&&o.settings.splice(h,1)})}),e.each(["column","row","cell"],function(e,t){i(t+"s().every()",function(e){var n=this.selector.opts,o=this;return this.iterator(t,function(i,a,r,c,l){e.call(o[t](a,"cell"===t?r:n,"cell"===t?n:s),a,r,c,l)})})}),i("i18n()",function(t,n,o){var i=this.context[0],t=S(t)(i.oLanguage);return t===s&&(t=n),(t=o!==s&&e.isPlainObject(t)?t[o]!==s?t[o]:t._:t).replace("%d",o)}),o.version="1.13.1",o.settings=[],o.models={},o.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0,return:!1},o.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null,idx:-1},o.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},o.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(e){try{return JSON.parse((-1===e.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+e.sInstance+"_"+location.pathname))}catch{return{}}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(e,t){try{(-1===e.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+e.sInstance+"_"+location.pathname,JSON.stringify(t))}catch{}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:e.extend({},o.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",searchDelay:null,sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null,rowId:"DT_RowId"},W(o.defaults),o.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},W(o.defaults.column),o.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1,bBounding:!1,barWidth:0},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aIds:{},aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,searchDelay:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,jqXHR:null,json:s,oAjaxData:s,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==h(this)?+this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==h(this)?+this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var e=this._iDisplayLength,t=this._iDisplayStart,s=t+e,n=this.aiDisplay.length,o=this.oFeatures,i=o.bPaginate;return o.bServerSide?!1===i||-1===e?t+n:Math.min(t+e,this._iRecordsDisplay):!i||n<s||-1===e?n:s},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{},rowIdFn:null,rowId:null},o.ext=d={buttons:{},classes:{},build:"dt/dt-1.13.1",errMode:"alert",feature:[],search:[],selector:{cell:[],column:[],row:[]},internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:o.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:o.version},e.extend(d,{afnFiltering:d.search,aTypes:d.type.detect,ofnSearch:d.type.search,oSort:d.type.order,afnSortData:d.order,aoFeatures:d.feature,oApi:d.internal,oStdClasses:d.classes,oPagination:d.pager}),e.extend(o.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_desc_disabled",sSortableDesc:"sorting_asc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""}),o.ext.pager);function L(e,t){var n=[],s=Dt.numbers_length,o=Math.floor(s/2);return t<=s?n=T(0,t):e<=o?((n=T(0,s-2)).push("ellipsis"),n.push(t-1)):((t-1-o<=e?n=T(t-(s-2),t):((n=T(e-o+2,e+o-1)).push("ellipsis"),n.push(t-1),n)).splice(0,0,"ellipsis"),n.splice(0,0,0)),n.DT_el="span",n}e.extend(Dt,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},numbers:function(e,t){return[L(e,t)]},simple_numbers:function(e,t){return["previous",L(e,t),"next"]},full_numbers:function(e,t){return["first","previous",L(e,t),"next","last"]},first_last_numbers:function(e,t){return["first",L(e,t),"last"]},_numbers:L,numbers_length:7}),e.extend(!0,o.ext.renderer,{pageButton:{_:function(t,o,i,a,r,c){function f(n,s){for(var o,a,v,h=m.sPageButtonDisabled,b=function(e){G(t,e.data.action,!0)},g=0,j=s.length;g<j;g++)if(o=s[g],Array.isArray(o))v=e("<"+(o.DT_el||"div")+"/>").appendTo(n),f(v,o);else{switch(l=null,d=o,a=t.iTabIndex,o){case"ellipsis":n.append('<span class="ellipsis">&#x2026;</span>');break;case"first":l=u.sFirst,0===r&&(a=-1,d+=" "+h);break;case"previous":l=u.sPrevious,0===r&&(a=-1,d+=" "+h);break;case"next":l=u.sNext,0!==c&&r!==c-1||(a=-1,d+=" "+h);break;case"last":l=u.sLast,0!==c&&r!==c-1||(a=-1,d+=" "+h);break;default:l=t.fnFormatNumber(o+1),d=r===o?m.sPageButtonActive:""}null!==l&&Le(e("<a>",{class:m.sPageButton+" "+d,"aria-controls":t.sTableId,"aria-label":p[o],"data-dt-idx":o,tabindex:a,id:0===i&&"string"==typeof o?t.sTableId+"_"+o:null}).html(l).appendTo(n),{action:o},b)}}var l,d,h,m=t.oClasses,u=t.oLanguage.oPaginate,p=t.oLanguage.oAria.paginate||{};try{h=e(o).find(n.activeElement).data("dt-idx")}catch{}f(e(o).empty(),a),h!==s&&e(o).find("[data-dt-idx="+h+"]").trigger("focus")}}}),e.extend(o.ext.type.detect,[function(e,t){return t=t.oLanguage.sDecimal,be(e,t)?"num"+t:null},function(e){var n;return(!e||e instanceof Date||Wt.test(e))&&(null!==(n=Date.parse(e))&&!isNaN(n)||_(e))?"date":null},function(e,t){return t=t.oLanguage.sDecimal,be(e,t,!0)?"num-fmt"+t:null},function(e,t){return t=t.oLanguage.sDecimal,Ft(e,t)?"html-num"+t:null},function(e,t){return t=t.oLanguage.sDecimal,Ft(e,t,!0)?"html-num-fmt"+t:null},function(e){return _(e)||"string"==typeof e&&-1!==e.indexOf("<")?"html":null}]),e.extend(o.ext.type.search,{html:function(e){return _(e)?e:"string"==typeof e?e.replace(Nt," ").replace(ie,""):""},string:function(e){return!_(e)&&"string"==typeof e?e.replace(Nt," "):e}});function X(e,t,n,s){return 0===e||e&&"-"!==e?+(e=(e=t?kt(e,t):e).replace&&(n&&(e=e.replace(n,"")),s)?e.replace(s,""):e):-1/0}function Ce(t){e.each({num:function(e){return X(e,t)},"num-fmt":function(e){return X(e,t,Ae)},"html-num":function(e){return X(e,t,ie)},"html-num-fmt":function(e){return X(e,t,ie,Ae)}},function(e,n){d.type.order[e+t+"-pre"]=n,e.match(/^html-/)&&(d.type.search[e+t]=d.type.search.html)})}e.extend(d.type.order,{"date-pre":function(e){return e=Date.parse(e),isNaN(e)?-1/0:e},"html-pre":function(e){return _(e)?"":e.replace?e.replace(/<.*?>/g,"").toLowerCase():e+""},"string-pre":function(e){return _(e)?"":"string"==typeof e?e.toLowerCase():e.toString?e.toString():""},"string-asc":function(e,t){return e<t?-1:t<e?1:0},"string-desc":function(e,t){return e<t?1:t<e?-1:0}}),Ce(""),e.extend(!0,o.ext.renderer,{header:{_:function(t,n,s,o){e(t.nTable).on("order.dt.DT",function(e,i,a,r){t===i&&(i=s.idx,n.removeClass(o.sSortAsc+" "+o.sSortDesc).addClass("asc"==r[i]?o.sSortAsc:"desc"==r[i]?o.sSortDesc:s.sSortingClass))})},jqueryui:function(t,n,s,o){e("<div/>").addClass(o.sSortJUIWrapper).append(n.contents()).append(e("<span/>").addClass(o.sSortIcon+" "+s.sSortingClassJUI)).appendTo(n),e(t.nTable).on("order.dt.DT",function(e,i,a,r){t===i&&(i=s.idx,n.removeClass(o.sSortAsc+" "+o.sSortDesc).addClass("asc"==r[i]?o.sSortAsc:"desc"==r[i]?o.sSortDesc:s.sSortingClass),n.find("span."+o.sSortIcon).removeClass(o.sSortJUIAsc+" "+o.sSortJUIDesc+" "+o.sSortJUI+" "+o.sSortJUIAscAllowed+" "+o.sSortJUIDescAllowed).addClass("asc"==r[i]?o.sSortJUIAsc:"desc"==r[i]?o.sSortJUIDesc:s.sSortingClassJUI))})}}});function oe(e){return"string"==typeof(e=Array.isArray(e)?e.join(","):e)?e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"):e}function Ht(e,n,s,o,i){return t.moment?e[n](i):t.luxon?e[s](i):o?e[o](i):e}we=!1;function ce(e,n,s){var o;if(t.moment){if(!(o=t.moment.utc(e,n,s,!0)).isValid())return null}else if(t.luxon){if(!(o=n&&"string"==typeof e?t.luxon.DateTime.fromFormat(e,n):t.luxon.DateTime.fromISO(e)).isValid)return null;o.setLocale(s)}else n?(we||alert("DataTables warning: Formatted date without Moment.js or Luxon - https://datatables.net/tn/17"),we=!0):o=new Date(e);return o}function _e(e){return function(t,n,i,a){0===arguments.length?(i="en",t=n=null):1===arguments.length?(i="en",n=t,t=null):2===arguments.length&&(i=n,n=t,t=null);var r="datetime-"+n;return o.ext.type.order[r]||(o.ext.type.detect.unshift(function(e){return e===r&&r}),o.ext.type.order[r+"-asc"]=function(e,t){return e=e.valueOf(),t=t.valueOf(),e===t?0:e<t?-1:1},o.ext.type.order[r+"-desc"]=function(e,t){return e=e.valueOf(),t=t.valueOf(),e===t?0:t<e?-1:1}),function(o,c){var l;return null!==o&&o!==s||(o="--now"===a?(l=new Date,new Date(Date.UTC(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds()))):""),"type"===c?r:""===o?"sort"!==c?"":ce("0000-01-01 00:00:00",null,i):!(null===n||t!==n||"sort"===c||"type"===c||o instanceof Date)||null===(l=ce(o,t,i))?o:"sort"===c?l:(o=null===n?Ht(l,"toDate","toJSDate","")[e]():Ht(l,"format","toFormat","toISOString",n),"display"===c?oe(o):o)}}}if(ye=",",je=".",Intl)try{for(z=(new Intl.NumberFormat).formatToParts(100000.1),k=0;k<z.length;k++)"group"===z[k].type?ye=z[k].value:"decimal"===z[k].type&&(je=z[k].value)}catch{}function wt(e){return function(){var t=[de(this[o.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return o.ext.internal[e].apply(this,t)}}return o.datetime=function(e,t){var n="datetime-detect-"+e;t=t||"en",o.ext.type.order[n]||(o.ext.type.detect.unshift(function(s){var o=ce(s,e,t);return!(""!==s&&!o)&&n}),o.ext.type.order[n+"-pre"]=function(n){return ce(n,e,t)||0})},o.render={date:_e("toLocaleDateString"),datetime:_e("toLocaleString"),time:_e("toLocaleTimeString"),number:function(e,t,n,o,i){return null!==e&&e!==s||(e=ye),null!==t&&t!==s||(t=je),{display:function(s){if("number"!=typeof s&&"string"!=typeof s)return s;if(""===s||null===s)return s;var r=s<0?"-":"",a=parseFloat(s);return isNaN(a)?oe(s):(a=a.toFixed(n),s=Math.abs(a),a=parseInt(s,10),s=n?t+(s-a).toFixed(n).substring(2):"",(r=0===a&&0===parseFloat(s)?"":r)+(o||"")+a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e)+s+(i||""))}}},text:function(){return{display:oe,filter:oe}}},e.extend(o.ext.internal,{_fnExternApiFunc:wt,_fnBuildAjax:me,_fnAjaxUpdate:Rt,_fnAjaxParameters:Tt,_fnAjaxUpdateDraw:at,_fnAjaxDataSrc:Y,_fnAddColumn:He,_fnColumnOptions:re,_fnAdjustColumnSizing:R,_fnVisibleToColumnIndex:P,_fnColumnIndexToVisible:H,_fnVisbleColumns:F,_fnGetColumns:pe,_fnColumnTypes:Be,_fnApplyColumnDefs:Qe,_fnHungarianMap:W,_fnCamelToHungarian:w,_fnLanguageCompat:De,_fnBrowserDetect:ct,_fnAddData:C,_fnAddTr:le,_fnNodeToDataIndex:function(e,t){return t._DT_RowIndex!==s?t._DT_RowIndex:null},_fnNodeToColumnIndex:function(t,n,s){return e.inArray(s,t.aoData[n].anCells)},_fnGetCellData:p,_fnSetCellData:Xe,_fnSplitObjNotation:Ke,_fnGetObjectDataFn:S,_fnSetObjectDataFn:O,_fnGetDataMaster:$e,_fnClearTable:ee,_fnDeleteIndex:te,_fnInvalidate:q,_fnGetRowElements:Ve,_fnCreateTr:Ie,_fnBuildHead:mt,_fnDrawHead:K,_fnDraw:x,_fnReDraw:E,_fnAddOptionsHtml:ft,_fnDetectHeader:V,_fnGetUniqueThs:he,_fnFeatureHtmlFilter:Et,_fnFilterComplete:B,_fnFilterCustom:zt,_fnFilterColumn:Lt,_fnFilter:It,_fnFilterCreateSearch:Oe,_fnEscapeRegex:xe,_fnFilterData:Mt,_fnFeatureHtmlInfo:Ye,_fnUpdateInfo:jt,_fnInfoMacros:pt,_fnInitialise:$,_fnInitComplete:J,_fnLengthChange:Ne,_fnFeatureHtmlLength:ut,_fnFeatureHtmlPaginate:qe,_fnPageChange:G,_fnFeatureHtmlProcessing:ot,_fnProcessingDisplay:g,_fnFeatureHtmlTable:nt,_fnScrollDraw:se,_fnApplyToChildren:y,_fnCalculateColumnWidths:Ue,_fnThrottle:ae,_fnConvertToWidth:et,_fnGetWidestNode:yt,_fnGetMaxLenString:Ge,_fnStringToCss:l,_fnSortFlatten:D,_fnSort:Ze,_fnSortAria:Je,_fnSortListener:ve,_fnSortAttachListener:We,_fnSortingClasses:ue,_fnSortData:st,_fnSaveState:I,_fnLoadState:it,_fnImplementState:Re,_fnSettingsFromNode:de,_fnLog:b,_fnMap:j,_fnBindAction:Le,_fnCallbackReg:m,_fnCallbackFire:r,_fnLengthOverflow:ze,_fnRenderer:Te,_fnDataSource:h,_fnRowAttributes:Pe,_fnExtend:ge,_fnCalculateEnd:function(){}}),((e.fn.dataTable=o).$=e).fn.dataTableSettings=o.settings,e.fn.dataTableExt=o.ext,e.fn.DataTable=function(t){return e(this).dataTable(t).api()},e.each(o,function(t,n){e.fn.DataTable[t]=n}),o});/*! DataTables styling integration
 * ©2018 SpryMedia Ltd - datatables.net/license
 */!function(e){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],function(t){return e(t,window,document)}):"object"==typeof exports?module.exports=function(t,n){return t=t||window,(n=n||("undefined"!=typeof window?require("jquery"):require("jquery")(t))).fn.dataTable||require("datatables.net")(t,n),e(n,0,t.document)}:e(jQuery,window,document)}(function(e){"use strict";return e.fn.dataTable});var bibtexify=function(e){var n,s,o,i=function(e){return e?(e=e.replace(/\\"\{a\}/g,"&auml;").replace(/\{\\aa\}/g,"&aring;").replace(/\\aa\{\}/g,"&aring;").replace(/\\"a/g,"&auml;").replace(/\\"\{o\}/g,"&ouml;").replace(/\\'e/g,"&eacute;").replace(/\\'\{e\}/g,"&eacute;").replace(/\\'a/g,"&aacute;").replace(/\\'A/g,"&Aacute;").replace(/\\"o/g,"&ouml;").replace(/\\"u/g,"&uuml;").replace(/\\ss\{\}/g,"&szlig;").replace(/\{/g,"").replace(/\}/g,"").replace(/\\&/g,"&").replace(/--/g,"&ndash;"),e):""},t={lang:{fr:{and:"et",archived:"Version archivée sur",article:"Journal",bibtex:"Entrée au format BibTex",book:"Book",close:"Fermer",conference:"<em>Workshop</em>",desc:"Description",dir:"Sous la dir. de",doi:"Identificateur d’objet numérique",first:"Première",future:"À paraître",inbook:"Book chapter",incollection:"",infoEmpty:"Affichage de 0 à 0 sur 0 entrées",infoFiltered:"(filtrées depuis un total de _MAX_ entrées)",info:"Affichage de _START_ à _END_ sur _TOTAL_ entrées",inproceedings:"Conférence",in:"In",last:"Dernière",lengthMenu:"Afficher _MENU_ entrées",link:"Lien",manual:"Manual",mastersthesis:"Mémoire",misc:"Divers",missing:"Manquant",next:"Suivante",online:"Cet article en ligne",pdfversion:"Version PDF",phdthesis:"Thèse",previous:"Précédente",proceedings:"Édition",search:"Rechercher :",sourcetex:"Source code LaTeX",techreport:"Rapport de recherche",type:"Type",unpublished:"Soumis",year:"Année",zeroRecords:"Aucune entrée correspondante trouvée"},en:{and:"and",archived:"Version archived on",article:"Journal",bibtex:"This article as BibTeX",book:"Book",close:"Close",conference:"Workshop",desc:"Description",dir:"Edited by",doi:"Digital Object Identifier",editor:"editor",first:"First",future:"To Appear",inbook:"Book chapter",incollection:"In Collection",infoEmpty:"No records available",infoFiltered:"(filtered from _MAX_ total records)",info:"Showing page _PAGE_ of _PAGES_",inproceedings:"Conference",in:"In",last:"Last",lengthMenu:"Show _MENU_ entries",link:"link",manual:"Manual",mastersthesis:"Thesis",misc:"Misc",missing:"Missing",next:"Next",online:"This article online",pdfversion:"PDF version",phdthesis:"PhD Thesis",previous:"Previous",proceedings:"Conference proceeding",search:"Search:",sourcetex:"Latex source code",techreport:"Technical report",type:"Type",unpublished:"Unpublished",year:"Year",zeroRecords:"Nothing found - sorry"}},entry2html:function(e,n){n.options.lang=="fr"?lang=t.lang.fr:n.options.lang=="en"?lang=t.lang.en:(alert("This language is not supported yet. Defaulting to English."),lang=t.lang.en);var o,s=e.entryType.toLowerCase();return array_keys(t).indexOf(s)===-1&&(s="misc",e.entryType=s),o=i(t[s](e)),o+=t.links(e),o+=t.bibtex(e),o.replace(/undefined[,.]?/g,'<span class="undefined">'+lang.missing+"</span>")},authors2html:function(e){var t,s,n="";if(!e)return n;if(e.length>10)t=e[0],n+=t.first+(t.von?" "+t.von+" ":" ")+t.last+" et al";else for(s=0;s<e.length;s++)s>0&&(s==e.length-1?n+=" "+lang.and+" ":n+=", "),t=e[s],n+=t.first+(t.von?" "+t.von+" ":" ")+t.last;return i(n)},links:function(e){var n,s,t="<br/>";return e.url&&e.url.match(/.*\.pdf/)?t+=' (<a title="'+lang.pdfversion+'." href="'+e.url+'" style="white-space: nowrap"><i class="fa fa-file-pdf fa-fw" style="color:red" aria-hidden="true"></i>pdf</a>)':e.url&&(t+=' (<a title="'+lang.online+'"  href="'+e.url+'" style="white-space: nowrap"><i class="fa fa-external-link fa-fw" style="color:blue" aria-hidden="true"></i>'+lang.link+"</a>)"),e.doi&&(t+=' (<a title="'+lang.doi+'." href="http://dx.doi.org/'+e.doi+'" style="white-space: nowrap"><i class="ai ai-doi" style="color:#fab222" aria-hidden="true"></i>doi</a>)'),e.archiveprefix&&e.eprint&&(n="",s="",e.archiveprefix=="arXiv"?(n="http://arxiv.org/abs/",s='ai ai-arxiv" style="background-color:#02f702"'):e.archiveprefix=="tel"?(n="https://tel.archives-ouvertes.fr/",s='ai ai-hal" style="color:#cd3c1b"'):e.archiveprefix=="hal"?(n="https://hal.science/",s='ai ai-hal" style="color:#cd3c1b"'):e.archiveprefix=="handle"&&(n="https://hdl.handle.net/"),t+=' (<a title="'+lang.archived+" "+e.archiveprefix+'." href="'+n+e.eprint+'" style="white-space: nowrap">'+(s?'<i class="'+s+'" aria-hidden="true"></i>':"")+e.archiveprefix+"</a>)"),e.file&&(t+=" (<a title="+lang.sourcetex+' href="'+e.file+'" style="white-space: nowrap"><i class="fa fa-code" aria-hidden="true" style="color: black"></i>source</a>)'),t},bibtex:function(t){var n="";return n+=' (<a title="'+lang.bibtex+'" href="#" class="biblink" style="white-space: nowrap"><i class="fa fa-file-text fa-fw" style="color:green" aria-hidden="true"></i>bib</a>)<div class="bibinfo hidden">',n+='<a href="#" class="bibclose" title="'+lang.close+'">⨯</a><pre>',n+="@"+t.entryType+"{"+t.cite+`,
`,e.each(t,function(e,t){if(e=="author"){n+="  author = {";for(var s=0;s<t.length;s++)s>0&&(n+=" and "),n+=(t[s].von?" "+t[s].von+" ":"")+t[s].last+(t[s].first?", "+t[s].first:"");n+=`},
`}else if(e=="editor"){n+="  editor = {";for(s=0;s<t.length;s++)s>0&&(n+=" and "),n+=(t[s].von?" "+t[s].von+" ":"")+t[s].last+(t[s].first?", "+t[s].first:"");n+=`},
`}else e!="entryType"&&e!="cite"&&(n+="  "+e+" = {"+t+`},
`)}),n+="}</pre></div>",n},inproceedings:function(e){return this.authors2html(e.author)+'.<br><strong id="'+e.cite+'">'+e.title+"</strong>.<br/>"+lang.in+": <em>"+e.booktitle+"</em>. "+(e.editor?lang.dir+" "+this.authors2html(e.editor)+". ":"")+(e.publisher?i(e.publisher):"")+(e.publisher?e.pages?", ":".":"")+(e.pages?"pp.&nbsp;"+e.pages:"")+(e.address?", "+e.address+".":"")+"</em>"},incollection:function(e){return this.authors2html(e.author)+'.<br><strong id="'+e.cite+'">'+e.title+"</strong>.<br/>"+ +lang.in+": "+(e.editor?""+this.authors2html(e.editor)+", "+lang.editor+", ":"")+"<em>"+e.booktitle+(e.pages?", pp.&nbsp;"+e.pages:"")+(e.address?", "+e.address:"")+".</em>"},article:function(e){return this.authors2html(e.author)+'.<br><strong id="'+e.cite+'">'+e.title+"</strong>.<br/>"+lang.in+": <em>"+e.journal+(e.volume?", "+e.volume:"")+(e.number?"("+e.number+")":"")+(e.pages?", pp.&nbsp;"+e.pages+".":"")+(e.address?e.address+".":"")+"</em>"},misc:function(e){return this.authors2html(e.author)+'.<br><strong id="'+e.cite+'">'+e.title+"</strong>.<br/>"+(e.howpublished?e.howpublished+". ":"")+(e.note?e.note+".":"")},mastersthesis:function(e){return this.authors2html(e.author)+'.<br><strong id="'+e.cite+'">'+e.title+"</strong>.<br/>"+e.type+". "+(e.organization?e.organization+", ":"")+e.school+"."},techreport:function(e){return this.authors2html(e.author)+'.<br><strong id="'+e.cite+'">'+e.title+"</strong>.<br/>"+e.institution+". "+(e.number?e.number+". ":"")+(e.type?e.type+".":"")},book:function(e){return this.authors2html(e.author||e.editor)+'.<br><strong id="'+e.cite+'">'+e.title+"</strong>.<br/>"+e.publisher+(e.issn?", ISBN: "+e.issn+".":".")},inbook:function(e){return this.authors2html(e.author)+'.<br><strong id="'+e.cite+'">'+e.chapter+"</strong>.<br/>"+lang.in+" <em>"+e.title+"</em>, "+(e.editor?" "+lang.dir+" "+this.authors2html(e.editor)+", ":"")+e.publisher+(e.pages?", pp.&nbsp;"+e.pages:"")+(e.series?", <em>"+e.series+"</em>":"")+(e.volume?", Vol.&nbsp;"+e.volume:"")+(e.issn?", ISBN: "+e.issn:"")+"."},proceedings:function(e){return(e.editor?(lang.dir?lang.dir+" ":"")+this.authors2html(e.editor):"")+'<br><strong id="'+e.cite+'">'+e.title+"</strong>.<br/>"+(e.volume?"T. "+e.volume+".":"")+(e.series?" "+e.series:"")+(e.address?", "+e.address:"")+". "+(e.organization?+e.organization:"")+(e.organization&&e.publisher?", ":"")+(e.publisher?e.publisher+". ":"")+(e.note?e.note:"")},importance:{TITLE:9999,unpublished:0,misc:0,manual:10,techreport:20,mastersthesis:30,phdthesis:40,conference:50,incollection:60,inproceedings:70,proceedings:80,article:90,inbook:100,book:110}};return t.phdthesis=t.mastersthesis,t.conference=t.inproceedings,n={showbib:function(n){e(this).next(".bibinfo").removeClass("hidden").addClass("open"),e("#shutter").show(),n.preventDefault()},hidebib:function(n){e("#shutter").hide(),e(".bibinfo.open").removeClass("open").addClass("hidden"),n.preventDefault()}},s=function(e,t,n,s){this.options=s,this.bibElemId=t,this.$pubTable=n,this.stats={},this.initialize(e)},o=s.prototype,o.initialize=function(o){a=new BibTex,a.content=o,a.parse();var i,a,c,l,u,d=[],h=a.data.length,r={};jQuery.extend(!0,t,this.options.bib2html);for(c=0;c<h;c++){i=a.data[c],i.year||(this.options.defaultYear?i.year=this.options.defaultYear:this.options.lang=="fr"?i.year=t.lang.fr.future:this.options.lang=="en"?i.year=t.lang.en.future:(alert("This language is not supported yet. Defaulting to English."),i.year=t.lang.en.future));try{u=t.entry2html(i,this),d.push([i.year,lang[i.entryType],u]),r[lang[i.entryType]]=i.entryType,this.updateStats(i)}catch{console.error("Failed to process entry: ",i)}}jQuery.fn.dataTableExt.oSort["type-sort-asc"]=function(e,n){var s=t.importance[r[e]],o=t.importance[r[n]];return s<o?-1:s>o?1:0},jQuery.fn.dataTableExt.oSort["type-sort-desc"]=function(e,n){var s=t.importance[r[e]],o=t.importance[r[n]];return s<o?1:s>o?-1:0},l=this.$pubTable.dataTable(e.extend({aaData:d,aaSorting:this.options.sorting,aoColumns:[{sTitle:lang.year},{sTitle:"Type",sType:"type-sort",asSorting:["desc","asc"]},{sTitle:lang.desc,bSortable:!1}],language:{search:lang.search,zeroRecords:lang.zeroRecords,info:lang.info,infoEmpty:lang.infoEmpty,infoFiltered:lang.infoFiltered,paginate:{first:lang.first,last:lang.last,next:lang.next,previous:lang.previous},lengthMenu:lang.lengthMenu}},this.options.datatable)),this.options.visualization&&this.addBarChart(),e("th",this.$pubTable).unbind("click").click(function(){var s=e(this),n=s.parent().find("th"),o=n.index(s);if(s.hasClass("sorting_disabled"))return;s.toggleClass("sorting_asc").toggleClass("sorting_desc"),o===0?l.fnSort([[0,n.eq(0).hasClass("sorting_asc")?"asc":"desc"],[1,n.eq(1).hasClass("sorting_asc")?"asc":"desc"]]):l.fnSort([[1,n.eq(1).hasClass("sorting_asc")?"asc":"desc"],[0,n.eq(0).hasClass("sorting_asc")?"asc":"desc"]])}),e(".biblink",this.$pubTable).on("click",n.showbib),e(".bibclose",this.$pubTable).on("click",n.hidebib)},o.updateStats=function(t){this.stats[t.year]?(this.stats[t.year].count+=1,this.stats[t.year].types[t.entryType]?this.stats[t.year].types[t.entryType]+=1:this.stats[t.year].types[t.entryType]=1):(this.stats[t.year]={count:1,types:{}},this.stats[t.year].types[t.entryType]=1)},o.addBarChart=function(){i=[],o=0,r=0,e.each(this.stats,function(n,s){var a=[];e.each(s.types,function(e){a.push(e)}),a.sort(function(e,n){return t.importance[n]-t.importance[e]}),i.push({year:n,count:s.count,item:s,types:s.types,typeArr:a}),o=Math.max(o,s.count),r=Math.max(r,a.length)}),h=o>15,i.sort(function(e,t){var n=e.year-t.year;return isNaN(n)?e.year<t.year?-1:e.year>t.year?1:0:n}),c="#"+this.bibElemId+" .bibchart",l="#"+this.bibElemId+" .legend",s=[],f=function(e){for(var t,i,a=e.typeArr,r='<div class="year">',n="<br/>",o=0;o<a.length;o++)if(t=a[o],s.indexOf(t)===-1&&s.push(t),h)n+='<div class="pub '+t+'"></div>';else for(i=0;i<e.types[t];i++)n+='<div class="pub '+t+'"></div>';return r+=n,r+'<div class="yearlabel">'+e.year+"</div></div>"},u="",i.forEach(function(e){u+=f(e)});for(var s,o,i,r,c,l,d,u,h,f,m="",a=0,p=s.length;a<p;a++)d=s[a],m+='<div><span class="pub '+d+'"></span>'+lang[d]+"</div>";e(c).html(u),e(l).length===0&&e(c).after('<div class="legend"></div>'),e(l).html(m)},function(t,o,i){var a,l,r=e.extend({},{visualization:!0,sorting:[[0,"desc"],[1,"desc"]],lang:"en"},i),c=e("#"+o+" table").addClass("bibtable").addClass("display");e("#shutter").length===0&&(c.before('<div id="shutter" class="hidden"></div>'),e("#shutter").click(n.hidebib)),r.visualization&&e("#"+o+" .bibchart").length===0?c.before('<div class="bibchart-container"><div class="bibchart"></div></div><div class="legend"></div>'):!r.visualization&&e("#"+o+" .bibchart").length>0&&e("#"+o+" .bibchart")[0].remove(),t.indexOf("/")===-1&&(a=e(t)),a&&a.length?(new s(a.html(),o,c,r),a.hide()):(l=function(e){new s(e,c,r)},e.get(t,l,"text"))}}(jQuery)